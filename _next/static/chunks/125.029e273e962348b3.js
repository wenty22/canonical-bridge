(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[125],{2185:function(t,e,r){var s="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,i=function(){function t(){this.fetch=!1,this.DOMException=s.DOMException}return t.prototype=s,new t}();(function(t){var e=void 0!==i&&i||"undefined"!=typeof self&&self||void 0!==r.g&&r.g||{},s={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(s.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(t){return t&&n.indexOf(Object.prototype.toString.call(t))>-1};function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function h(t){return"string"!=typeof t&&(t=String(t)),t}function c(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return s.iterable&&(e[Symbol.iterator]=function(){return e}),e}function l(t){this.map={},t instanceof l?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){if(2!=t.length)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+t.length);this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function u(t){if(!t._noBody){if(t.bodyUsed)return Promise.reject(TypeError("Already read"));t.bodyUsed=!0}}function f(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function p(t){var e=new FileReader,r=f(e);return e.readAsArrayBuffer(t),r}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){if(this.bodyUsed=this.bodyUsed,this._bodyInit=t,t){if("string"==typeof t)this._bodyText=t;else if(s.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(s.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else{var e;s.arrayBuffer&&s.blob&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||o(t))?this._bodyArrayBuffer=d(t):this._bodyText=t=Object.prototype.toString.call(t)}}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return u(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(s.blob)return this.blob().then(p);throw Error("could not read as ArrayBuffer")},this.text=function(){var t,e,r,s,i,n=u(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,r=f(e=new FileReader),i=(s=/charset=([A-Za-z0-9_-]+)/.exec(t.type))?s[1]:"utf-8",e.readAsText(t,i),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=Array(e.length),s=0;s<e.length;s++)r[s]=String.fromCharCode(e[s]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},s.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(t,e){t=a(t),e=h(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},l.prototype.delete=function(t){delete this.map[a(t)]},l.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},l.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},l.prototype.set=function(t,e){this.map[a(t)]=h(e)},l.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},l.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),c(t)},l.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),c(t)},l.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),c(t)},s.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var m=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function _(t,r){if(!(this instanceof _))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var s,i,n=(r=r||{}).body;if(t instanceof _){if(t.bodyUsed)throw TypeError("Already read");this.url=t.url,this.credentials=t.credentials,r.headers||(this.headers=new l(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=r.credentials||this.credentials||"same-origin",(r.headers||!this.headers)&&(this.headers=new l(r.headers)),this.method=(i=(s=r.method||this.method||"GET").toUpperCase(),m.indexOf(i)>-1?i:s),this.mode=r.mode||this.mode||null,this.signal=r.signal||this.signal||function(){if("AbortController"in e)return new AbortController().signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===r.cache||"no-cache"===r.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function b(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),s=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(s),decodeURIComponent(i))}}),e}function g(t,e){if(!(this instanceof g))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new l(e.headers),this.url=e.url||"",this._initBody(t)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},y.call(_.prototype),y.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:200,statusText:""});return t.ok=!1,t.status=0,t.type="error",t};var v=[301,302,303,307,308];g.redirect=function(t,e){if(-1===v.indexOf(e))throw RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function w(r,i){return new Promise(function(n,o){var c=new _(r,i);if(c.signal&&c.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function f(){u.abort()}if(u.onload=function(){var t,e,r={statusText:u.statusText,headers:(t=u.getAllResponseHeaders()||"",e=new l,t.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t}).forEach(function(t){var r=t.split(":"),s=r.shift().trim();if(s){var i=r.join(":").trim();try{e.append(s,i)}catch(t){console.warn("Response "+t.message)}}}),e)};0===c.url.indexOf("file://")&&(u.status<200||u.status>599)?r.status=200:r.status=u.status,r.url="responseURL"in u?u.responseURL:r.headers.get("X-Request-URL");var s="response"in u?u.response:u.responseText;setTimeout(function(){n(new g(s,r))},0)},u.onerror=function(){setTimeout(function(){o(TypeError("Network request failed"))},0)},u.ontimeout=function(){setTimeout(function(){o(TypeError("Network request timed out"))},0)},u.onabort=function(){setTimeout(function(){o(new t.DOMException("Aborted","AbortError"))},0)},u.open(c.method,function(t){try{return""===t&&e.location.href?e.location.href:t}catch(e){return t}}(c.url),!0),"include"===c.credentials?u.withCredentials=!0:"omit"===c.credentials&&(u.withCredentials=!1),"responseType"in u&&(s.blob?u.responseType="blob":s.arrayBuffer&&(u.responseType="arraybuffer")),i&&"object"==typeof i.headers&&!(i.headers instanceof l||e.Headers&&i.headers instanceof e.Headers)){var p=[];Object.getOwnPropertyNames(i.headers).forEach(function(t){p.push(a(t)),u.setRequestHeader(t,h(i.headers[t]))}),c.headers.forEach(function(t,e){-1===p.indexOf(e)&&u.setRequestHeader(e,t)})}else c.headers.forEach(function(t,e){u.setRequestHeader(e,t)});c.signal&&(c.signal.addEventListener("abort",f),u.onreadystatechange=function(){4===u.readyState&&c.signal.removeEventListener("abort",f)}),u.send(void 0===c._bodyInit?null:c._bodyInit)})}w.polyfill=!0,e.fetch||(e.fetch=w,e.Headers=l,e.Request=_,e.Response=g),t.Headers=l,t.Request=_,t.Response=g,t.fetch=w})({}),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var n=s.fetch?s:i;(e=n.fetch).default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,t.exports=e},979:function(t,e,r){var s,i=r(11805);!function(n){var o=Object.hasOwnProperty,a=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},h="object"==typeof i&&"function"==typeof i.nextTick,c="function"==typeof Symbol,l="object"==typeof Reflect,u="function"==typeof setImmediate?setImmediate:setTimeout,f=c?l&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(t){var e=Object.getOwnPropertyNames(t);return e.push.apply(e,Object.getOwnPropertySymbols(t)),e}:Object.keys;function p(){this._events={},this._conf&&d.call(this,this._conf)}function d(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),n!==t.maxListeners&&(this._maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this._newListener=t.newListener),t.removeListener&&(this._removeListener=t.removeListener),t.verboseMemoryLeak&&(this.verboseMemoryLeak=t.verboseMemoryLeak),t.ignoreErrors&&(this.ignoreErrors=t.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function y(t,e){var r="(node) warning: possible EventEmitter memory leak detected. "+t+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(r+=" Event name: "+e+"."),void 0!==i&&i.emitWarning){var s=Error(r);s.name="MaxListenersExceededWarning",s.emitter=this,s.count=t,i.emitWarning(s)}else console.error(r),console.trace&&console.trace()}var m=function(t,e,r){var s=arguments.length;switch(s){case 0:return[];case 1:return[t];case 2:return[t,e];case 3:return[t,e,r];default:for(var i=Array(s);s--;)i[s]=arguments[s];return i}};function _(t,e){for(var r={},s=t.length,i=e?e.length:0,o=0;o<s;o++)r[t[o]]=o<i?e[o]:n;return r}function b(t,e,r){if(this._emitter=t,this._target=e,this._listeners={},this._listenersCount=0,(r.on||r.off)&&(s=r.on,i=r.off),e.addEventListener?(s=e.addEventListener,i=e.removeEventListener):e.addListener?(s=e.addListener,i=e.removeListener):e.on&&(s=e.on,i=e.off),!s&&!i)throw Error("target does not implement any known event API");if("function"!=typeof s)throw TypeError("on method must be a function");if("function"!=typeof i)throw TypeError("off method must be a function");this._on=s,this._off=i;var s,i,n=t._observers;n?n.push(this):t._observers=[this]}function g(t,e,r,s){var i,a,h,c=Object.assign({},e);if(!t)return c;if("object"!=typeof t)throw TypeError("options must be an object");var l=Object.keys(t),u=l.length;function f(t){throw Error('Invalid "'+i+'" option value'+(t?". Reason: "+t:""))}for(var p=0;p<u;p++){if(i=l[p],!s&&!o.call(e,i))throw Error('Unknown "'+i+'" option');n!==(a=t[i])&&(h=r[i],c[i]=h?h(a,f):a)}return c}function v(t,e){return"function"==typeof t&&t.hasOwnProperty("prototype")||e("value must be a constructor"),t}function w(t){var e="value must be type of "+t.join("|"),r=t.length,s=t[0],i=t[1];return 1===r?function(t,r){if(typeof t===s)return t;r(e)}:2===r?function(t,r){var n=typeof t;if(n===s||n===i)return t;r(e)}:function(s,i){for(var n=typeof s,o=r;o-- >0;)if(n===t[o])return s;i(e)}}Object.assign(b.prototype,{subscribe:function(t,e,r){var s=this,i=this._target,n=this._emitter,o=this._listeners,a=function(){var s=m.apply(null,arguments),o={data:s,name:e,original:t};if(r){!1!==r.call(i,o)&&n.emit.apply(n,[o.name].concat(s));return}n.emit.apply(n,[e].concat(s))};if(o[t])throw Error("Event '"+t+"' is already listening");this._listenersCount++,n._newListener&&n._removeListener&&!s._onNewListener?(this._onNewListener=function(r){r===e&&null===o[t]&&(o[t]=a,s._on.call(i,t,a))},n.on("newListener",this._onNewListener),this._onRemoveListener=function(r){r===e&&!n.hasListeners(r)&&o[t]&&(o[t]=null,s._off.call(i,t,a))},o[t]=null,n.on("removeListener",this._onRemoveListener)):(o[t]=a,s._on.call(i,t,a))},unsubscribe:function(t){var e,r,s,i=this,n=this._listeners,o=this._emitter,a=this._off,h=this._target;if(t&&"string"!=typeof t)throw TypeError("event must be a string");function c(){i._onNewListener&&(o.off("newListener",i._onNewListener),o.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var t=A.call(o,i);o._observers.splice(t,1)}if(t){if(!(e=n[t]))return;a.call(h,t,e),delete n[t],--this._listenersCount||c()}else{for(s=(r=f(n)).length;s-- >0;)t=r[s],a.call(h,t,n[t]);this._listeners={},this._listenersCount=0,c()}}});var E=w(["function"]),k=w(["object","function"]);function T(t,e,r){var s,i,n,o=0,a=new t(function(h,c,l){function u(){i&&(i=null),o&&(clearTimeout(o),o=0)}s=!(r=g(r,{timeout:0,overload:!1},{timeout:function(t,e){return("number"!=typeof(t*=1)||t<0||!Number.isFinite(t))&&e("timeout must be a positive number"),t}})).overload&&"function"==typeof t.prototype.cancel&&"function"==typeof l;var f=function(t){u(),h(t)},p=function(t){u(),c(t)};s?e(f,p,l):(i=[function(t){p(t||Error("canceled"))}],e(f,p,function(t){if(n)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof t)throw TypeError("onCancel callback must be a function");i.push(t)}),n=!0),r.timeout>0&&(o=setTimeout(function(){var t=Error("timeout");t.code="ETIMEDOUT",o=0,a.cancel(t),c(t)},r.timeout))});return s||(a.cancel=function(t){if(i){for(var e=i.length,r=1;r<e;r++)i[r](t);i[0](t),i=null}}),a}function A(t){var e=this._observers;if(!e)return -1;for(var r=e.length,s=0;s<r;s++)if(e[s]._target===t)return s;return -1}function L(t,e,r,s,i){if(!r)return null;if(0===s){var n=typeof e;if("string"===n){var o,a,h=0,c=0,l=this.delimiter,u=l.length;if(-1!==(a=e.indexOf(l))){o=[,,,,,];do o[h++]=e.slice(c,a),c=a+u;while(-1!==(a=e.indexOf(l,c)));o[h++]=e.slice(c),e=o,i=h}else e=[e],i=1}else"object"===n?i=e.length:(e=[e],i=1)}var p,d,y,m,_,b,g,v=null,w=e[s],E=e[s+1];if(s===i)r._listeners&&("function"==typeof r._listeners?t&&t.push(r._listeners):t&&t.push.apply(t,r._listeners),v=[r]);else{if("*"===w){for(a=(b=f(r)).length;a-- >0;)"_listeners"!==(p=b[a])&&(g=L(t,e,r[p],s+1,i))&&(v?v.push.apply(v,g):v=g);return v}if("**"===w){for((_=s+1===i||s+2===i&&"*"===E)&&r._listeners&&(v=L(t,e,r,i,i)),a=(b=f(r)).length;a-- >0;)"_listeners"!==(p=b[a])&&("*"===p||"**"===p?(r[p]._listeners&&!_&&(g=L(t,e,r[p],i,i))&&(v?v.push.apply(v,g):v=g),g=L(t,e,r[p],s,i)):g=p===E?L(t,e,r[p],s+2,i):L(t,e,r[p],s,i),g&&(v?v.push.apply(v,g):v=g));return v}r[w]&&(v=L(t,e,r[w],s+1,i))}if((d=r["*"])&&L(t,e,d,s+1,i),y=r["**"]){if(s<i)for(y._listeners&&L(t,e,y,i,i),a=(b=f(y)).length;a-- >0;)"_listeners"!==(p=b[a])&&(p===E?L(t,e,y[p],s+2,i):p===w?L(t,e,y[p],s+1,i):((m={})[p]=y[p],L(t,e,{"**":m},s+1,i)));else y._listeners?L(t,e,y,i,i):y["*"]&&y["*"]._listeners&&L(t,e,y["*"],i,i)}return v}function O(t,e,r){var s,i,n=0,o=0,a=this.delimiter,h=a.length;if("string"==typeof t){if(-1!==(s=t.indexOf(a))){i=[,,,,,];do i[n++]=t.slice(o,s),o=s+h;while(-1!==(s=t.indexOf(a,o)));i[n++]=t.slice(o)}else i=[t],n=1}else i=t,n=t.length;if(n>1){for(s=0;s+1<n;s++)if("**"===i[s]&&"**"===i[s+1])return}var c,l=this.listenerTree;for(s=0;s<n;s++)if(l=l[c=i[s]]||(l[c]={}),s===n-1){l._listeners?("function"==typeof l._listeners&&(l._listeners=[l._listeners]),r?l._listeners.unshift(e):l._listeners.push(e),!l._listeners.warned&&this._maxListeners>0&&l._listeners.length>this._maxListeners&&(l._listeners.warned=!0,y.call(this,l._listeners.length,c))):l._listeners=e;break}return!0}function x(t,e,r,s){for(var i,n,o,a,h=f(t),c=h.length,l=t._listeners;c-- >0;)i=t[n=h[c]],o="_listeners"===n?r:r?r.concat(n):[n],a=s||"symbol"==typeof n,l&&e.push(a?o:o.join(this.delimiter)),"object"==typeof i&&x.call(this,i,e,o,a);return e}function R(t){for(var e,r,s,i=f(t),n=i.length;n-- >0;)(e=t[r=i[n]])&&(s=!0,"_listeners"===r||R(e)||delete t[r]);return s}function B(t,e,r){this.emitter=t,this.event=e,this.listener=r}function C(t,e,r){if(!0===r)o=!0;else if(!1===r)s=!0;else{if(!r||"object"!=typeof r)throw TypeError("options should be an object or true");var s=r.async,o=r.promisify,a=r.nextTick,c=r.objectify}if(s||a||o){var l=e,f=e._origin||e;if(a&&!h)throw Error("process.nextTick is not supported");n===o&&(o="AsyncFunction"===e.constructor.name),(e=function(){var t=arguments,e=this,r=this.event;return o?a?Promise.resolve():new Promise(function(t){u(t)}).then(function(){return e.event=r,l.apply(e,t)}):(a?i.nextTick:u)(function(){e.event=r,l.apply(e,t)})})._async=!0,e._origin=f}return[e,c?new B(this,t,e):this]}function P(t){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,d.call(this,t)}B.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},P.EventEmitter2=P,P.prototype.listenTo=function(t,e,r){if("object"!=typeof t)throw TypeError("target musts be an object");var s=this;return r=g(r,{on:n,off:n,reducers:n},{on:E,off:E,reducers:k}),function(e){if("object"!=typeof e)throw TypeError("events must be an object");var i,n,o=r.reducers,a=A.call(s,t);i=-1===a?new b(s,t,r):s._observers[a];for(var h=f(e),c=h.length,l="function"==typeof o,u=0;u<c;u++)n=h[u],i.subscribe(n,e[n]||n,l?o:o&&o[n])}(a(e)?_(e):"string"==typeof e?_(e.split(/\s+/)):e),this},P.prototype.stopListeningTo=function(t,e){var r,s=this._observers;if(!s)return!1;var i=s.length,n=!1;if(t&&"object"!=typeof t)throw TypeError("target should be an object");for(;i-- >0;)r=s[i],t&&r._target!==t||(r.unsubscribe(e),n=!0);return n},P.prototype.delimiter=".",P.prototype.setMaxListeners=function(t){n!==t&&(this._maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t)},P.prototype.getMaxListeners=function(){return this._maxListeners},P.prototype.event="",P.prototype.once=function(t,e,r){return this._once(t,e,!1,r)},P.prototype.prependOnceListener=function(t,e,r){return this._once(t,e,!0,r)},P.prototype._once=function(t,e,r,s){return this._many(t,1,e,r,s)},P.prototype.many=function(t,e,r,s){return this._many(t,e,r,!1,s)},P.prototype.prependMany=function(t,e,r,s){return this._many(t,e,r,!0,s)},P.prototype._many=function(t,e,r,s,i){var n=this;if("function"!=typeof r)throw Error("many only accepts instances of Function");function o(){return 0==--e&&n.off(t,o),r.apply(this,arguments)}return o._origin=r,this._on(t,o,s,i)},P.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||p.call(this);var t,e,r,s,i,n,o,a=arguments[0],h=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return!1;if(h&&(o=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(e=a.length,c){for(r=0;r<e;r++)if("symbol"==typeof a[r]){i=!0;break}}i||(a=a.join(this.delimiter))}var l=arguments.length;if(this._all&&this._all.length)for(r=0,e=(n=this._all.slice()).length;r<e;r++)switch(this.event=a,l){case 1:n[r].call(this,a);break;case 2:n[r].call(this,a,arguments[1]);break;case 3:n[r].call(this,a,arguments[1],arguments[2]);break;default:n[r].apply(this,arguments)}if(h)n=[],L.call(this,n,o,this.listenerTree,0,e);else{if("function"==typeof(n=this._events[a])){switch(this.event=a,l){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=1,t=Array(l-1);s<l;s++)t[s-1]=arguments[s];n.apply(this,t)}return!0}n&&(n=n.slice())}if(n&&n.length){if(l>3)for(s=1,t=Array(l-1);s<l;s++)t[s-1]=arguments[s];for(r=0,e=n.length;r<e;r++)switch(this.event=a,l){case 1:n[r].call(this);break;case 2:n[r].call(this,arguments[1]);break;case 3:n[r].call(this,arguments[1],arguments[2]);break;default:n[r].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===a){if(arguments[1]instanceof Error)throw arguments[1];throw Error("Uncaught, unspecified 'error' event.")}return!!this._all},P.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||p.call(this);var t,e,r,s,i,n,o,a=arguments[0],h=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(h&&(n=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(e=a.length,c){for(r=0;r<e;r++)if("symbol"==typeof a[r]){o=!0;break}}o||(a=a.join(this.delimiter))}var l=[],u=arguments.length;if(this._all)for(r=0,e=this._all.length;r<e;r++)switch(this.event=a,u){case 1:l.push(this._all[r].call(this,a));break;case 2:l.push(this._all[r].call(this,a,arguments[1]));break;case 3:l.push(this._all[r].call(this,a,arguments[1],arguments[2]));break;default:l.push(this._all[r].apply(this,arguments))}if(h?(i=[],L.call(this,i,n,this.listenerTree,0)):i=this._events[a],"function"==typeof i)switch(this.event=a,u){case 1:l.push(i.call(this));break;case 2:l.push(i.call(this,arguments[1]));break;case 3:l.push(i.call(this,arguments[1],arguments[2]));break;default:for(s=1,t=Array(u-1);s<u;s++)t[s-1]=arguments[s];l.push(i.apply(this,t))}else if(i&&i.length){if(i=i.slice(),u>3)for(s=1,t=Array(u-1);s<u;s++)t[s-1]=arguments[s];for(r=0,e=i.length;r<e;r++)switch(this.event=a,u){case 1:l.push(i[r].call(this));break;case 2:l.push(i[r].call(this,arguments[1]));break;case 3:l.push(i[r].call(this,arguments[1],arguments[2]));break;default:l.push(i[r].apply(this,t))}}else if(!this.ignoreErrors&&!this._all&&"error"===a)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(l)},P.prototype.on=function(t,e,r){return this._on(t,e,!1,r)},P.prototype.prependListener=function(t,e,r){return this._on(t,e,!0,r)},P.prototype.onAny=function(t){return this._onAny(t,!1)},P.prototype.prependAny=function(t){return this._onAny(t,!0)},P.prototype.addListener=P.prototype.on,P.prototype._onAny=function(t,e){if("function"!=typeof t)throw Error("onAny only accepts instances of Function");return this._all||(this._all=[]),e?this._all.unshift(t):this._all.push(t),this},P.prototype._on=function(t,e,r,s){if("function"==typeof t)return this._onAny(t,e),this;if("function"!=typeof e)throw Error("on only accepts instances of Function");this._events||p.call(this);var i,o=this;return(n!==s&&(e=(i=C.call(this,t,e,s))[0],o=i[1]),this._newListener&&this.emit("newListener",t,e),this.wildcard)?O.call(this,t,e,r):this._events[t]?("function"==typeof this._events[t]&&(this._events[t]=[this._events[t]]),r?this._events[t].unshift(e):this._events[t].push(e),!this._events[t].warned&&this._maxListeners>0&&this._events[t].length>this._maxListeners&&(this._events[t].warned=!0,y.call(this,this._events[t].length,t))):this._events[t]=e,o},P.prototype.off=function(t,e){if("function"!=typeof e)throw Error("removeListener only takes instances of Function");var r,s=[];if(this.wildcard){var i="string"==typeof t?t.split(this.delimiter):t.slice();if(!(s=L.call(this,null,i,this.listenerTree,0)))return this}else{if(!this._events[t])return this;r=this._events[t],s.push({_listeners:r})}for(var n=0;n<s.length;n++){var o=s[n];if(a(r=o._listeners)){for(var h=-1,c=0,l=r.length;c<l;c++)if(r[c]===e||r[c].listener&&r[c].listener===e||r[c]._origin&&r[c]._origin===e){h=c;break}if(h<0)continue;return this.wildcard?o._listeners.splice(h,1):this._events[t].splice(h,1),0===r.length&&(this.wildcard?delete o._listeners:delete this._events[t]),this._removeListener&&this.emit("removeListener",t,e),this}(r===e||r.listener&&r.listener===e||r._origin&&r._origin===e)&&(this.wildcard?delete o._listeners:delete this._events[t],this._removeListener&&this.emit("removeListener",t,e))}return this.listenerTree&&R(this.listenerTree),this},P.prototype.offAny=function(t){var e,r=0,s=0;if(t&&this._all&&this._all.length>0){for(r=0,s=(e=this._all).length;r<s;r++)if(t===e[r]){e.splice(r,1),this._removeListener&&this.emit("removeListenerAny",t);break}}else{if(e=this._all,this._removeListener)for(r=0,s=e.length;r<s;r++)this.emit("removeListenerAny",e[r]);this._all=[]}return this},P.prototype.removeListener=P.prototype.off,P.prototype.removeAllListeners=function(t){if(n===t)return this._events&&p.call(this),this;if(this.wildcard){var e,r=L.call(this,null,t,this.listenerTree,0);if(!r)return this;for(e=0;e<r.length;e++)r[e]._listeners=null;this.listenerTree&&R(this.listenerTree)}else this._events&&(this._events[t]=null);return this},P.prototype.listeners=function(t){var e,r,s,i,o,a=this._events;if(n===t){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!a)return[];for(i=(e=f(a)).length,s=[];i-- >0;)"function"==typeof(r=a[e[i]])?s.push(r):s.push.apply(s,r);return s}if(this.wildcard){if(!(o=this.listenerTree))return[];var h=[],c="string"==typeof t?t.split(this.delimiter):t.slice();return L.call(this,h,c,o,0),h}return a&&(r=a[t])?"function"==typeof r?[r]:r:[]},P.prototype.eventNames=function(t){var e=this._events;return this.wildcard?x.call(this,this.listenerTree,[],null,t):e?f(e):[]},P.prototype.listenerCount=function(t){return this.listeners(t).length},P.prototype.hasListeners=function(t){if(this.wildcard){var e=[],r="string"==typeof t?t.split(this.delimiter):t.slice();return L.call(this,e,r,this.listenerTree,0),e.length>0}var s=this._events,i=this._all;return!!(i&&i.length||s&&(n===t?f(s).length:s[t]))},P.prototype.listenersAny=function(){return this._all?this._all:[]},P.prototype.waitFor=function(t,e){var r=this,s=typeof e;return"number"===s?e={timeout:e}:"function"===s&&(e={filter:e}),T((e=g(e,{timeout:0,filter:n,handleError:!1,Promise:Promise,overload:!1},{filter:E,Promise:v})).Promise,function(s,i,n){function o(){var n=e.filter;if(!n||n.apply(r,arguments)){if(r.off(t,o),e.handleError){var a=arguments[0];a?i(a):s(m.apply(null,arguments).slice(1))}else s(m.apply(null,arguments))}}n(function(){r.off(t,o)}),r._on(t,o,!1)},{timeout:e.timeout,overload:e.overload})};var S=P.prototype;Object.defineProperties(P,{defaultMaxListeners:{get:function(){return S._maxListeners},set:function(t){if("number"!=typeof t||t<0||Number.isNaN(t))throw TypeError("n must be a non-negative number");S._maxListeners=t},enumerable:!0},once:{value:function(t,e,r){return T((r=g(r,{Promise:Promise,timeout:0,overload:!1},{Promise:v})).Promise,function(r,s,i){if("function"==typeof t.addEventListener){n=function(){r(m.apply(null,arguments))},i(function(){t.removeEventListener(e,n)}),t.addEventListener(e,n,{once:!0});return}var n,o,a=function(){o&&t.removeListener("error",o),r(m.apply(null,arguments))};"error"!==e&&(o=function(r){t.removeListener(e,a),s(r)},t.once("error",o)),i(function(){o&&t.removeListener("error",o),t.removeListener(e,a)}),t.once(e,a)},{timeout:r.timeout,overload:r.overload})},writable:!0,configurable:!0}}),Object.defineProperties(S,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),n!==(s=(function(){return P}).call(e,r,e,t))&&(t.exports=s)}()},3980:function(t,e,r){"use strict";let s,i;r.d(e,{io:function(){return tL}});var n,o,a={};r.r(a),r.d(a,{Decoder:function(){return tb},Encoder:function(){return tm},PacketType:function(){return o},protocol:function(){return ty}});let h=Object.create(null);h.open="0",h.close="1",h.ping="2",h.pong="3",h.message="4",h.upgrade="5",h.noop="6";let c=Object.create(null);Object.keys(h).forEach(t=>{c[h[t]]=t});let l={type:"error",data:"parser error"},u="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),f="function"==typeof ArrayBuffer,p=t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,d=({type:t,data:e},r,s)=>u&&e instanceof Blob?r?s(e):y(e,s):f&&(e instanceof ArrayBuffer||p(e))?r?s(e):y(new Blob([e]),s):s(h[t]+(e||"")),y=(t,e)=>{let r=new FileReader;return r.onload=function(){e("b"+(r.result.split(",")[1]||""))},r.readAsDataURL(t)};function m(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let t=0;t<_.length;t++)b[_.charCodeAt(t)]=t;let g=t=>{let e=.75*t.length,r=t.length,s,i=0,n,o,a,h;"="===t[t.length-1]&&(e--,"="===t[t.length-2]&&e--);let c=new ArrayBuffer(e),l=new Uint8Array(c);for(s=0;s<r;s+=4)n=b[t.charCodeAt(s)],o=b[t.charCodeAt(s+1)],a=b[t.charCodeAt(s+2)],h=b[t.charCodeAt(s+3)],l[i++]=n<<2|o>>4,l[i++]=(15&o)<<4|a>>2,l[i++]=(3&a)<<6|63&h;return c},v="function"==typeof ArrayBuffer,w=(t,e)=>{if("string"!=typeof t)return{type:"message",data:k(t,e)};let r=t.charAt(0);return"b"===r?{type:"message",data:E(t.substring(1),e)}:c[r]?t.length>1?{type:c[r],data:t.substring(1)}:{type:c[r]}:l},E=(t,e)=>v?k(g(t),e):{base64:!0,data:t},k=(t,e)=>"blob"===e?t instanceof Blob?t:new Blob([t]):t instanceof ArrayBuffer?t:t.buffer,T=(t,e)=>{let r=t.length,s=Array(r),i=0;t.forEach((t,n)=>{d(t,!1,t=>{s[n]=t,++i===r&&e(s.join("\x1e"))})})},A=(t,e)=>{let r=t.split("\x1e"),s=[];for(let t=0;t<r.length;t++){let i=w(r[t],e);if(s.push(i),"error"===i.type)break}return s};function L(t){return t.reduce((t,e)=>t+e.length,0)}function O(t,e){if(t[0].length===e)return t.shift();let r=new Uint8Array(e),s=0;for(let i=0;i<e;i++)r[i]=t[0][s++],s===t[0].length&&(t.shift(),s=0);return t.length&&s<t[0].length&&(t[0]=t[0].slice(s)),r}function x(t){if(t)return function(t){for(var e in x.prototype)t[e]=x.prototype[e];return t}(t)}x.prototype.on=x.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},x.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},x.prototype.off=x.prototype.removeListener=x.prototype.removeAllListeners=x.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,s=this._callbacks["$"+t];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<s.length;i++)if((r=s[i])===e||r.fn===e){s.splice(i,1);break}return 0===s.length&&delete this._callbacks["$"+t],this},x.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=Array(arguments.length-1),r=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,i=r.length;s<i;++s)r[s].apply(this,e)}return this},x.prototype.emitReserved=x.prototype.emit,x.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},x.prototype.hasListeners=function(t){return!!this.listeners(t).length};let R="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),B="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function C(t,...e){return e.reduce((e,r)=>(t.hasOwnProperty(r)&&(e[r]=t[r]),e),{})}let P=B.setTimeout,S=B.clearTimeout;function N(t,e){e.useNativeTimers?(t.setTimeoutFn=P.bind(B),t.clearTimeoutFn=S.bind(B)):(t.setTimeoutFn=B.setTimeout.bind(B),t.clearTimeoutFn=B.clearTimeout.bind(B))}function j(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class q extends Error{constructor(t,e,r){super(t),this.description=e,this.context=r,this.type="TransportError"}}class D extends x{constructor(t){super(),this.writable=!1,N(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,r){return super.emitReserved("error",new q(t,e,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){let e=w(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){let t=this.opts.hostname;return -1===t.indexOf(":")?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(t){let e=function(t){let e="";for(let r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e}(t);return e.length?"?"+e:""}}class U extends D{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";let e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let t=0;this._polling&&(t++,this.once("pollComplete",function(){--t||e()})),this.writable||(t++,this.once("drain",function(){--t||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){A(t,this.socket.binaryType).forEach(t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){let t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,T(t,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.opts.secure?"https":"http",e=this.query||{};return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=j()),this.supportsBinary||e.sid||(e.b64=1),this.createUri(t,e)}}let F=!1;try{F="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){}let I=F;function M(){}class H extends U{constructor(t){if(super(t),"undefined"!=typeof location){let e="https:"===location.protocol,r=location.port;r||(r=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,e){let r=this.request({method:"POST",data:t});r.on("success",e),r.on("error",(t,e)=>{this.onError("xhr post error",t,e)})}doPoll(){let t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(t,e)=>{this.onError("xhr poll error",t,e)}),this.pollXhr=t}}class V extends x{constructor(t,e,r){super(),this.createRequest=t,N(this,r),this._opts=r,this._method=r.method||"GET",this._uri=e,this._data=void 0!==r.data?r.data:null,this._create()}_create(){var t;let e=C(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;let r=this._xhr=this.createRequest(e);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(let t in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(t)&&r.setRequestHeader(t,this._opts.extraHeaders[t])}catch(t){}if("POST"===this._method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{r.setRequestHeader("Accept","*/*")}catch(t){}null===(t=this._opts.cookieJar)||void 0===t||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var t;3===r.readyState&&(null===(t=this._opts.cookieJar)||void 0===t||t.parseCookies(r.getResponseHeader("set-cookie"))),4===r.readyState&&(200===r.status||1223===r.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof r.status?r.status:0)},0))},r.send(this._data)}catch(t){this.setTimeoutFn(()=>{this._onError(t)},0);return}"undefined"!=typeof document&&(this._index=V.requestsCount++,V.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=M,t)try{this._xhr.abort()}catch(t){}"undefined"!=typeof document&&delete V.requests[this._index],this._xhr=null}}_onLoad(){let t=this._xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}function K(){for(let t in V.requests)V.requests.hasOwnProperty(t)&&V.requests[t].abort()}V.requestsCount=0,V.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",K):"function"==typeof addEventListener&&addEventListener("onpagehide"in B?"pagehide":"unload",K,!1));let W=function(){let t=z({xdomain:!1});return t&&null!==t.responseType}();class Y extends H{constructor(t){super(t);let e=t&&t.forceBase64;this.supportsBinary=W&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new V(z,this.uri(),t)}}function z(t){let e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||I))return new XMLHttpRequest}catch(t){}if(!e)try{return new B[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(t){}}let $="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class J extends D{get name(){return"websocket"}doOpen(){let t=this.uri(),e=this.opts.protocols,r=$?{}:C(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,r)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let r=t[e],s=e===t.length-1;d(r,this.supportsBinary,t=>{try{this.doWrite(r,t)}catch(t){}s&&R(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=j()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}let X=B.WebSocket||B.MozWebSocket;class Q extends J{createSocket(t,e,r){return $?new X(t,e,r):e?new X(t,e):new X(t)}doWrite(t,e){this.ws.send(e)}}class G extends D{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{let e=function(t,e){i||(i=new TextDecoder);let r=[],s=0,n=-1,o=!1;return new TransformStream({transform(a,h){for(r.push(a);;){if(0===s){if(1>L(r))break;let t=O(r,1);o=(128&t[0])==128,s=(n=127&t[0])<126?3:126===n?1:2}else if(1===s){if(2>L(r))break;let t=O(r,2);n=new DataView(t.buffer,t.byteOffset,t.length).getUint16(0),s=3}else if(2===s){if(8>L(r))break;let t=O(r,8),e=new DataView(t.buffer,t.byteOffset,t.length),i=e.getUint32(0);if(i>2097151){h.enqueue(l);break}n=4294967296*i+e.getUint32(4),s=3}else{if(L(r)<n)break;let t=O(r,n);h.enqueue(w(o?t:i.decode(t),e)),s=0}if(0===n||n>t){h.enqueue(l);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(e).getReader(),n=new TransformStream({transform(t,e){var r;r=r=>{let s;let i=r.length;if(i<126)new DataView((s=new Uint8Array(1)).buffer).setUint8(0,i);else if(i<65536){let t=new DataView((s=new Uint8Array(3)).buffer);t.setUint8(0,126),t.setUint16(1,i)}else{let t=new DataView((s=new Uint8Array(9)).buffer);t.setUint8(0,127),t.setBigUint64(1,BigInt(i))}t.data&&"string"!=typeof t.data&&(s[0]|=128),e.enqueue(s),e.enqueue(r)},u&&t.data instanceof Blob?t.data.arrayBuffer().then(m).then(r):f&&(t.data instanceof ArrayBuffer||p(t.data))?r(m(t.data)):d(t,!1,t=>{s||(s=new TextEncoder),r(s.encode(t))})}});n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();let o=()=>{r.read().then(({done:t,value:e})=>{t||(this.onPacket(e),o())}).catch(t=>{})};o();let a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let r=t[e],s=e===t.length-1;this._writer.write(r).then(()=>{s&&R(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;null===(t=this._transport)||void 0===t||t.close()}}let Z={websocket:Q,webtransport:G,polling:Y},tt=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,te=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function tr(t){if(t.length>8e3)throw"URI too long";let e=t,r=t.indexOf("["),s=t.indexOf("]");-1!=r&&-1!=s&&(t=t.substring(0,r)+t.substring(r,s).replace(/:/g,";")+t.substring(s,t.length));let i=tt.exec(t||""),n={},o=14;for(;o--;)n[te[o]]=i[o]||"";return -1!=r&&-1!=s&&(n.source=e,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=function(t,e){let r=e.replace(/\/{2,9}/g,"/").split("/");return("/"==e.slice(0,1)||0===e.length)&&r.splice(0,1),"/"==e.slice(-1)&&r.splice(r.length-1,1),r}(0,n.path),n.queryKey=function(t,e){let r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,e,s){e&&(r[e]=s)}),r}(0,n.query),n}let ts="function"==typeof addEventListener&&"function"==typeof removeEventListener,ti=[];ts&&addEventListener("offline",()=>{ti.forEach(t=>t())},!1);class tn extends x{constructor(t,e){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&"object"==typeof t&&(e=t,t=null),t){let r=tr(t);e.hostname=r.host,e.secure="https"===r.protocol||"wss"===r.protocol,e.port=r.port,r.query&&(e.query=r.query)}else e.host&&(e.hostname=tr(e.host).host);N(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(t=>{let e=t.prototype.name;this.transports.push(e),this._transportsByName[e]=t}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(t){let e={},r=t.split("&");for(let t=0,s=r.length;t<s;t++){let s=r[t].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}(this.opts.query)),ts&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ti.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){let e=Object.assign({},this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);let r=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(0===this.transports.length){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let t=this.opts.rememberUpgrade&&tn.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";let e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",tn.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let e=Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let e=0;e<this.writeBuffer.length;e++){let r=this.writeBuffer[e].data;if(r&&(t+="string"==typeof r?function(t){let e=0,r=0;for(let s=0,i=t.length;s<i;s++)(e=t.charCodeAt(s))<128?r+=1:e<2048?r+=2:e<55296||e>=57344?r+=3:(s++,r+=4);return r}(r):Math.ceil(1.33*(r.byteLength||r.size))),e>0&&t>this._maxPayload)return this.writeBuffer.slice(0,e);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,R(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,r){return this._sendPacket("message",t,e,r),this}send(t,e,r){return this._sendPacket("message",t,e,r),this}_sendPacket(t,e,r,s){if("function"==typeof e&&(s=e,e=void 0),"function"==typeof r&&(s=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;let i={type:t,data:e,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){let t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},r=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(tn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ts&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let t=ti.indexOf(this._offlineEventListener);-1!==t&&ti.splice(t,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}tn.protocol=4;class to extends tn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),r=!1;tn.priorWebsocketSuccess=!1;let s=()=>{r||(e.send([{type:"ping",data:"probe"}]),e.once("packet",t=>{if(!r){if("pong"===t.type&&"probe"===t.data)this.upgrading=!0,this.emitReserved("upgrading",e),e&&(tn.priorWebsocketSuccess="websocket"===e.name,this.transport.pause(()=>{r||"closed"===this.readyState||(c(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}));else{let t=Error("probe error");t.transport=e.name,this.emitReserved("upgradeError",t)}}}))};function i(){r||(r=!0,c(),e.close(),e=null)}let n=t=>{let r=Error("probe error: "+t);r.transport=e.name,i(),this.emitReserved("upgradeError",r)};function o(){n("transport closed")}function a(){n("socket closed")}function h(t){e&&t.name!==e.name&&i()}let c=()=>{e.removeListener("open",s),e.removeListener("error",n),e.removeListener("close",o),this.off("close",a),this.off("upgrading",h)};e.once("open",s),e.once("error",n),e.once("close",o),this.once("close",a),this.once("upgrading",h),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==t?this.setTimeoutFn(()=>{r||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){let e=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&e.push(t[r]);return e}}class ta extends to{constructor(t,e={}){let r="object"==typeof t?t:e;(!r.transports||r.transports&&"string"==typeof r.transports[0])&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(t=>Z[t]).filter(t=>!!t)),super(t,r)}}ta.protocol;let th="function"==typeof ArrayBuffer,tc=t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,tl=Object.prototype.toString,tu="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===tl.call(Blob),tf="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===tl.call(File);function tp(t){return th&&(t instanceof ArrayBuffer||tc(t))||tu&&t instanceof Blob||tf&&t instanceof File}let td=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ty=5;(n=o||(o={}))[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK";class tm{constructor(t){this.replacer=t}encode(t){return(t.type===o.EVENT||t.type===o.ACK)&&function t(e,r){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let r=0,s=e.length;r<s;r++)if(t(e[r]))return!0;return!1}if(tp(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1==arguments.length)return t(e.toJSON(),!0);for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return!0;return!1}(t)?this.encodeAsBinary({type:t.type===o.EVENT?o.BINARY_EVENT:o.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===o.BINARY_EVENT||t.type===o.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){let e=function(t){let e=[],r=t.data;return t.data=function t(e,r){if(!e)return e;if(tp(e)){let t={_placeholder:!0,num:r.length};return r.push(e),t}if(Array.isArray(e)){let s=Array(e.length);for(let i=0;i<e.length;i++)s[i]=t(e[i],r);return s}if("object"==typeof e&&!(e instanceof Date)){let s={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=t(e[i],r));return s}return e}(r,e),t.attachments=e.length,{packet:t,buffers:e}}(t),r=this.encodeAsString(e.packet),s=e.buffers;return s.unshift(r),s}}function t_(t){return"[object Object]"===Object.prototype.toString.call(t)}class tb extends x{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");let r=(e=this.decodeString(t)).type===o.BINARY_EVENT;r||e.type===o.BINARY_ACK?(e.type=r?o.EVENT:o.ACK,this.reconstructor=new tg(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(tp(t)||t.base64){if(this.reconstructor)(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw Error("got binary data when not reconstructing a packet")}else throw Error("Unknown type: "+t)}decodeString(t){let e=0,r={type:Number(t.charAt(0))};if(void 0===o[r.type])throw Error("unknown packet type "+r.type);if(r.type===o.BINARY_EVENT||r.type===o.BINARY_ACK){let s=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);let i=t.substring(s,e);if(i!=Number(i)||"-"!==t.charAt(e))throw Error("Illegal attachments");r.attachments=Number(i)}if("/"===t.charAt(e+1)){let s=e+1;for(;++e&&","!==t.charAt(e)&&e!==t.length;);r.nsp=t.substring(s,e)}else r.nsp="/";let s=t.charAt(e+1);if(""!==s&&Number(s)==s){let s=e+1;for(;++e;){let r=t.charAt(e);if(null==r||Number(r)!=r){--e;break}if(e===t.length)break}r.id=Number(t.substring(s,e+1))}if(t.charAt(++e)){let s=this.tryParse(t.substr(e));if(tb.isPayloadValid(r.type,s))r.data=s;else throw Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case o.CONNECT:return t_(e);case o.DISCONNECT:return void 0===e;case o.CONNECT_ERROR:return"string"==typeof e||t_(e);case o.EVENT:case o.BINARY_EVENT:return Array.isArray(e)&&("number"==typeof e[0]||"string"==typeof e[0]&&-1===td.indexOf(e[0]));case o.ACK:case o.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class tg{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e,r;let t=(e=this.reconPack,r=this.buffers,e.data=function t(e,r){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<r.length)return r[e.num];throw Error("illegal attachments")}if(Array.isArray(e))for(let s=0;s<e.length;s++)e[s]=t(e[s],r);else if("object"==typeof e)for(let s in e)Object.prototype.hasOwnProperty.call(e,s)&&(e[s]=t(e[s],r));return e}(e.data,r),delete e.attachments,e);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function tv(t,e,r){return t.on(e,r),function(){t.off(e,r)}}let tw=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class tE extends x{constructor(t,e,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let t=this.io;this.subs=[tv(t,"open",this.onopen.bind(this)),tv(t,"packet",this.onpacket.bind(this)),tv(t,"error",this.onerror.bind(this)),tv(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var r,s,i;if(tw.hasOwnProperty(t))throw Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;let n={type:o.EVENT,data:e};if(n.options={},n.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){let t=this.ids++,r=e.pop();this._registerAckCallback(t,r),n.id=t}let a=null===(s=null===(r=this.io.engine)||void 0===r?void 0:r.transport)||void 0===s?void 0:s.writable,h=this.connected&&!(null===(i=this.io.engine)||void 0===i?void 0:i._hasPingExpired());return this.flags.volatile&&!a||(h?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(t,e){var r;let s=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===s){this.acks[t]=e;return}let i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,Error("operation has timed out"))},s),n=(...t)=>{this.io.clearTimeoutFn(i),e.apply(this,t)};n.withError=!0,this.acks[t]=n}emitWithAck(t,...e){return new Promise((r,s)=>{let i=(t,e)=>t?s(t):r(e);i.withError=!0,e.push(i),this.emit(t,...e)})}_addToQueue(t){let e;"function"==typeof t[t.length-1]&&(e=t.pop());let r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((t,...s)=>{if(r===this._queue[0])return null!==t?r.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(t)):(this._queue.shift(),e&&e(null,...s)),r.pending=!1,this._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||0===this._queue.length)return;let e=this._queue[0];(!e.pending||t)&&(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:o.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(e=>String(e.id)===t)){let e=this.acks[t];delete this.acks[t],e.withError&&e.call(this,Error("socket has been disconnected"))}})}onpacket(t){if(!(t.nsp!==this.nsp))switch(t.type){case o.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case o.EVENT:case o.BINARY_EVENT:this.onevent(t);break;case o.ACK:case o.BINARY_ACK:this.onack(t);break;case o.DISCONNECT:this.ondisconnect();break;case o.CONNECT_ERROR:this.destroy();let e=Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){let e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length)for(let e of this._anyListeners.slice())e.apply(this,t);super.emit.apply(this,t),this._pid&&t.length&&"string"==typeof t[t.length-1]&&(this._lastOffset=t[t.length-1])}ack(t){let e=this,r=!1;return function(...s){r||(r=!0,e.packet({type:o.ACK,id:t,data:s}))}}onack(t){let e=this.acks[t.id];"function"==typeof e&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:o.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){let e=this._anyListeners;for(let r=0;r<e.length;r++)if(t===e[r]){e.splice(r,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){let e=this._anyOutgoingListeners;for(let r=0;r<e.length;r++)if(t===e[r]){e.splice(r,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(let e of this._anyOutgoingListeners.slice())e.apply(this,t.data)}}function tk(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}tk.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=(1&Math.floor(10*e))==0?t-r:t+r}return 0|Math.min(t,this.max)},tk.prototype.reset=function(){this.attempts=0},tk.prototype.setMin=function(t){this.ms=t},tk.prototype.setMax=function(t){this.max=t},tk.prototype.setJitter=function(t){this.jitter=t};class tT extends x{constructor(t,e){var r;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,N(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=e.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new tk({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;let s=e.parser||a;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new ta(this.uri,this.opts);let e=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;let s=tv(e,"open",function(){r.onopen(),t&&t()}),i=e=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",e),t?t(e):this.maybeReconnectOnOpen()},n=tv(e,"error",i);if(!1!==this._timeout){let t=this._timeout,r=this.setTimeoutFn(()=>{s(),i(Error("timeout")),e.close()},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}return this.subs.push(s),this.subs.push(n),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let t=this.engine;this.subs.push(tv(t,"ping",this.onping.bind(this)),tv(t,"data",this.ondata.bind(this)),tv(t,"error",this.onerror.bind(this)),tv(t,"close",this.onclose.bind(this)),tv(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(t){this.onclose("parse error",t)}}ondecoded(t){R(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new tE(this,t,e),this.nsps[t]=r),r}_destroy(t){for(let t of Object.keys(this.nsps))if(this.nsps[t].active)return;this._close()}_packet(t){let e=this.encoder.encode(t);for(let r=0;r<e.length;r++)this.engine.write(e[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var r;this.cleanup(),null===(r=this.engine)||void 0===r||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let e=this.backoff.duration();this._reconnecting=!0;let r=this.setTimeoutFn(()=>{!t.skipReconnect&&(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open(e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()}))},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){let t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}let tA={};function tL(t,e){let r;"object"==typeof t&&(e=t,t=void 0);let s=function(t,e="",r){let s=t;r=r||"undefined"!=typeof location&&location,null==t&&(t=r.protocol+"//"+r.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?r.protocol+t:r.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==r?r.protocol+"//"+t:"https://"+t),s=tr(t)),!s.port&&(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";let i=-1!==s.host.indexOf(":")?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+i+":"+s.port+e,s.href=s.protocol+"://"+i+(r&&r.port===s.port?"":":"+s.port),s}(t,(e=e||{}).path||"/socket.io"),i=s.source,n=s.id,o=s.path,a=tA[n]&&o in tA[n].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||a?r=new tT(i,e):(tA[n]||(tA[n]=new tT(i,e)),r=tA[n]),s.query&&!e.query&&(e.query=s.queryKey),r.socket(s.path,e)}Object.assign(tL,{Manager:tT,Socket:tE,io:tL,connect:tL})}}]);