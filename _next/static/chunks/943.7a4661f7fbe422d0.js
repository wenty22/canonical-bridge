"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{40197:function(e,t,n){var r=n(17273),o=n(795).Buffer;let a={data:o.alloc(0),dataLength:0,sequence:0};t.Z=(e,t)=>({makeBlocks(n){let r=o.concat([function(e){let t=o.alloc(2);return t.writeUInt16BE(e,0),t}(n.length),n]),a=t-5,i=Math.ceil(r.length/a);r=o.concat([r,o.alloc(i*a-r.length+1).fill(0)]);let s=[];for(let t=0;t<i;t++){let n=o.alloc(5);n.writeUInt16BE(e,0),n.writeUInt8(5,2),n.writeUInt16BE(t,3);let i=r.slice(t*a,(t+1)*a);s.push(o.concat([n,i]))}return s},reduceResponse(t,n){let{data:i,dataLength:s,sequence:c}=t||a;if(n.readUInt16BE(0)!==e)throw new r.PS("Invalid channel","InvalidChannel");if(5!==n.readUInt8(2))throw new r.PS("Invalid tag","InvalidTag");if(n.readUInt16BE(3)!==c)throw new r.PS("Invalid sequence","InvalidSequence");t||(s=n.readUInt16BE(5)),c++;let d=n.slice(t?5:7);return(i=o.concat([i,d])).length>s&&(i=i.slice(0,s)),{data:i,dataLength:s,sequence:c}},getReducedResult(e){if(e&&e.dataLength===e.data.length)return e.data}})},10123:function(e,t,n){n.d(t,{An:function(){return d},Ht:function(){return u}});var r,o,a=n(22066),i=n.n(a);(r=o||(o={})).blue="blue",r.nanoS="nanoS",r.nanoSP="nanoSP",r.nanoX="nanoX",r.stax="stax",r.europa="europa";let s={[o.blue]:{id:o.blue,productName:"Ledger\xa0Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:491520,masks:[822083584,822149120],getBlockSize:e=>4096},[o.nanoS]:{id:o.nanoS,productName:"Ledger\xa0Nano\xa0S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:327680,masks:[823132160],getBlockSize:e=>i().lt(i().coerce(e)??"","2.0.0")?4096:2048},[o.nanoX]:{id:o.nanoX,productName:"Ledger\xa0Nano\xa0X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2097152,masks:[855638016],getBlockSize:e=>4096,bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},[o.nanoSP]:{id:o.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1569792,masks:[856686592],getBlockSize:e=>32},[o.stax]:{id:o.stax,productName:"Ledger\xa0Stax",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:1569792,masks:[857735168],getBlockSize:e=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},[o.europa]:{id:o.europa,productName:"Ledger\xa0Flex",productIdMM:112,legacyUsbProductId:7,usbOnly:!1,memorySize:1569792,masks:[858783744],getBlockSize:e=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-3004-0000-4c6564676572",notifyUuid:"13d63400-2c97-3004-0001-4c6564676572",writeUuid:"13d63400-2c97-3004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-3004-0003-4c6564676572"}]}};o.blue,o.nanoS,o.nanoSP,o.nanoX,o.stax,o.europa;let c=Object.values(s),d=11415,u=e=>{let t=c.find(t=>t.legacyUsbProductId===e);if(t)return t;let n=e>>8;return c.find(e=>e.productIdMM===n)},l=[],p={};for(let e in s){let t=s[e],{bluetoothSpec:n}=t;if(n)for(let e=0;e<n.length;e++){let r=n[e];l.push(r.serviceUuid),p[r.serviceUuid]=p[r.serviceUuid.replace(/-/g,"")]={deviceModel:t,...r}}}},17273:function(e,t,n){var r,o;n.d(t,{qX:function(){return d},vs:function(){return u},WC:function(){return T},PS:function(){return g},$u:function(){return p},FB:function(){return l},wp:function(){return E},rZ:function(){return N},um:function(){return h}});let a={},i={},s=(e,t)=>{i[e]=t},c=e=>{class t extends Error{cause;constructor(n,r,o){if(super(n||e,o),Object.setPrototypeOf(this,t.prototype),this.name=e,r)for(let e in r)this[e]=r[e];if(o&&"object"==typeof o&&"cause"in o&&!this.cause){let e=o.cause;this.cause=e,"stack"in e&&(this.stack=this.stack+"\nCAUSE: "+e.stack)}}}return a[e]=t,t};c("AccountNameRequired"),c("AccountNotSupported"),c("AccountAwaitingSendPendingOperations"),c("AmountRequired"),c("BluetoothRequired"),c("BtcUnmatchedApp"),c("CantOpenDevice"),c("CashAddrNotSupported"),c("ClaimRewardsFeesWarning"),c("CurrencyNotSupported"),c("DeviceAppVerifyNotSupported"),c("DeviceGenuineSocketEarlyClose"),c("DeviceNotGenuine"),c("DeviceOnDashboardExpected"),c("DeviceOnDashboardUnexpected"),c("DeviceInOSUExpected"),c("DeviceHalted"),c("DeviceNameInvalid"),c("DeviceSocketFail"),c("DeviceSocketNoBulkStatus"),c("DeviceSocketNoBulkStatus"),c("UnresponsiveDeviceError");let d=c("DisconnectedDevice"),u=c("DisconnectedDeviceDuringOperation");c("DeviceExtractOnboardingStateError"),c("DeviceOnboardingStatePollingError"),c("EnpointConfig"),c("EthAppPleaseEnableContractData"),c("FeeEstimationFailed"),c("FirmwareNotRecognized"),c("HardResetFail"),c("InvalidXRPTag"),c("InvalidAddress"),c("InvalidNonce"),c("InvalidAddressBecauseDestinationIsAlsoSource"),c("LatestMCUInstalledError"),c("LatestFirmwareVersionRequired"),c("UnknownMCU"),c("LedgerAPIError"),c("LedgerAPIErrorWithMessage"),c("LedgerAPINotAvailable"),c("ManagerAppAlreadyInstalled"),c("ManagerAppRelyOnBTC"),c("ManagerAppDepInstallRequired"),c("ManagerAppDepUninstallRequired"),c("ManagerDeviceLocked"),c("ManagerFirmwareNotEnoughSpace"),c("ManagerNotEnoughSpace"),c("ManagerUninstallBTCDep"),c("NetworkDown"),c("NetworkError"),c("NoAddressesFound"),c("NotEnoughBalance"),c("NotEnoughBalanceFees"),c("NotEnoughBalanceSwap"),c("NotEnoughBalanceToDelegate"),c("UnstakeNotEnoughStakedBalanceLeft"),c("RestakeNotEnoughStakedBalanceLeft"),c("NotEnoughToRestake"),c("NotEnoughToUnstake"),c("NotEnoughBalanceInParentAccount"),c("NotEnoughSpendableBalance"),c("NotEnoughBalanceBecauseDestinationNotCreated"),c("NotEnoughToStake"),c("NoAccessToCamera"),c("NotEnoughGas"),c("NotEnoughGasSwap"),c("TronEmptyAccount"),c("MaybeKeepTronAccountAlive"),c("NotSupportedLegacyAddress"),c("GasLessThanEstimate"),c("PriorityFeeTooLow"),c("PriorityFeeTooHigh"),c("PriorityFeeHigherThanMaxFee"),c("MaxFeeTooLow"),c("PasswordsDontMatch"),c("PasswordIncorrect"),c("RecommendSubAccountsToEmpty"),c("RecommendUndelegation"),c("TimeoutTagged"),c("UnexpectedBootloader"),c("MCUNotGenuineToDashboard"),c("RecipientRequired"),c("UnavailableTezosOriginatedAccountReceive"),c("UnavailableTezosOriginatedAccountSend"),c("UpdateFetchFileFail"),c("UpdateIncorrectHash"),c("UpdateIncorrectSig"),c("UpdateYourApp"),c("UserRefusedDeviceNameChange"),c("UserRefusedAddress"),c("UserRefusedFirmwareUpdate"),c("UserRefusedAllowManager"),c("UserRefusedOnDevice"),c("PinNotSet"),c("ExpertModeRequired");let l=c("TransportOpenUserCancelled"),p=c("TransportInterfaceNotAvailable"),E=c("TransportRaceCondition"),h=c("TransportWebUSBGestureRequired");c("TransactionHasBeenValidatedError"),c("TransportExchangeTimeoutError"),c("DeviceShouldStayInApp"),c("WebsocketConnectionError"),c("WebsocketConnectionFailed"),c("WrongDeviceForAccount"),c("WrongDeviceForAccountPayout"),c("MissingSwapPayloadParamaters"),c("WrongDeviceForAccountRefund"),c("WrongAppForCurrency"),c("ETHAddressNonEIP"),c("CantScanQRCode"),c("FeeNotLoaded"),c("FeeNotLoadedSwap"),c("FeeRequired"),c("FeeTooHigh"),c("PendingOperation"),c("SyncError"),c("PairingFailed"),c("PeerRemovedPairing"),c("GenuineCheckFailed"),c("LedgerAPI4xx"),c("LedgerAPI5xx"),c("FirmwareOrAppUpdateRequired"),c("ReplacementTransactionUnderpriced"),c("OpReturnSizeLimit"),c("DustLimit"),c("LanguageNotFound"),c("NoDBPathGiven"),c("DBWrongPassword"),c("DBNotReset"),c("SequenceNumberError"),c("DisabledTransactionBroadcastError"),(o=r||(r={})).Unknown="Unknown",o.LocationServicesDisabled="LocationServicesDisabled",o.LocationServicesUnauthorized="LocationServicesUnauthorized",o.BluetoothScanStartFailed="BluetoothScanStartFailed";class g extends Error{id;constructor(e,t){let n="TransportError";super(e||n),this.name=n,this.message=e,this.stack=Error(e).stack,this.id=t}}s("TransportError",e=>new g(e.message,e.id));let T={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,DEVICE_IN_RECOVERY_MODE:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,DEVICE_NOT_ONBOARDED:27911,DEVICE_NOT_ONBOARDED_2:26129,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761,NOT_ENOUGH_SPACE:20738,APP_NOT_FOUND_OR_INVALID_CONTEXT:20771,INVALID_APP_NAME_LENGTH:26378,GEN_AES_KEY_FAILED:21529,INTERNAL_CRYPTO_OPERATION_FAILED:21530,INTERNAL_COMPUTE_AES_CMAC_FAILED:21531,ENCRYPT_APP_STORAGE_FAILED:21532,INVALID_BACKUP_STATE:26178,PIN_NOT_SET:21762,INVALID_BACKUP_LENGTH:26419,INVALID_RESTORE_STATE:26179,INVALID_CHUNK_LENGTH:26420,INVALID_BACKUP_HEADER:26698,TRUSTCHAIN_WRONG_SEED:45063};class N extends Error{statusCode;statusText;constructor(e,{canBeMappedToChildError:t=!0}={}){let n=Object.keys(T).find(t=>T[t]===e)||"UNKNOWN_ERROR",r=function(e){switch(e){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=e&&e<=28671)return"Internal error, please report"}(e)||n,o=e.toString(16),a=`Ledger device: ${r} (0x${o})`;if(super(a),this.name="TransportStatusError",this.statusCode=e,this.statusText=n,Object.setPrototypeOf(this,N.prototype),t&&e===T.LOCKED_DEVICE)return new I(a)}}class I extends N{constructor(e){super(T.LOCKED_DEVICE,{canBeMappedToChildError:!1}),e&&(this.message=e),this.name="LockedDeviceError",Object.setPrototypeOf(this,I.prototype)}}s("TransportStatusError",e=>new N(e.statusCode))},69962:function(e,t,n){n.d(t,{ZP:function(){return c}});var r=n(14090),o=n.n(r),a=n(17273),i=n(81545),s=n(795).Buffer;class c{exchangeTimeout=3e4;unresponsiveTimeout=15e3;deviceModel=null;tracer;constructor({context:e,logType:t}={}){this.tracer=new i.O$(t??"transport",e)}static isSupported;static list;static listen;static open;exchange(e,{abortTimeoutMs:t}={}){throw Error("exchange not implemented")}exchangeBulk(e,t){let n=!1;return(async()=>{if(!n)for(let r of e){let e=await this.exchange(r);if(n)return;let o=e.readUInt16BE(e.length-2);if(o!==a.WC.OK)throw new a.rZ(o);t.next(e)}})().then(()=>!n&&t.complete(),e=>!n&&t.error(e)),{unsubscribe:()=>{n=!0}}}setScrambleKey(e){}close(){return Promise.resolve()}_events=new(o());on(e,t){this._events.on(e,t)}off(e,t){this._events.removeListener(e,t)}emit(e,...t){this._events.emit(e,...t)}setDebugMode(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}setExchangeTimeout(e){this.exchangeTimeout=e}setExchangeUnresponsiveTimeout(e){this.unresponsiveTimeout=e}send=async(e,t,n,r,o=s.alloc(0),i=[a.WC.OK],{abortTimeoutMs:c}={})=>{let d=this.tracer.withUpdatedContext({function:"send"});if(o.length>=256)throw d.trace("data.length exceeded 256 bytes limit",{dataLength:o.length}),new a.PS("data.length exceed 256 bytes limit. Got: "+o.length,"DataLengthTooBig");d.trace("Starting an exchange",{abortTimeoutMs:c});let u=await this.exchange(s.concat([s.from([e,t,n,r]),s.from([o.length]),o]),{abortTimeoutMs:c});d.trace("Received response from exchange");let l=u.readUInt16BE(u.length-2);if(!i.some(e=>e===l))throw new a.rZ(l);return u};static create(e=3e3,t){return new Promise((n,r)=>{let o=!1,i=this.listen({next:t=>{o=!0,i&&i.unsubscribe(),s&&clearTimeout(s),this.open(t.descriptor,e).then(n,r)},error:e=>{s&&clearTimeout(s),r(e)},complete:()=>{s&&clearTimeout(s),o||r(new a.PS(this.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),s=t?setTimeout(()=>{i.unsubscribe(),r(new a.PS(this.ErrorMessage_ListenTimeout,"ListenTimeout"))},t):null})}exchangeBusyPromise;async exchangeAtomicImpl(e){let t;let n=this.tracer.withUpdatedContext({function:"exchangeAtomicImpl",unresponsiveTimeout:this.unresponsiveTimeout});if(this.exchangeBusyPromise)throw n.trace("Atomic exchange is already busy"),new a.wp("An action was already pending on the Ledger device. Please deny or reconnect.");let r=new Promise(e=>{t=e});this.exchangeBusyPromise=r;let o=!1,i=setTimeout(()=>{n.trace('Timeout reached, emitting Transport event "unresponsive"',{unresponsiveTimeout:this.unresponsiveTimeout}),o=!0,this.emit("unresponsive")},this.unresponsiveTimeout);try{let t=await e();return o&&(n.trace("Device was unresponsive, emitting responsive"),this.emit("responsive")),t}finally{n.trace("Finalize, clearing busy guard"),clearTimeout(i),t&&t(),this.exchangeBusyPromise=null}}decorateAppAPIMethods(e,t,n){for(let r of t)e[r]=this.decorateAppAPIMethod(r,e[r],e,n)}_appAPIlock=null;decorateAppAPIMethod(e,t,n,r){return async(...o)=>{let{_appAPIlock:i}=this;if(i)return Promise.reject(new a.PS("Ledger Device is busy (lock "+i+")","TransportLocked"));try{return this._appAPIlock=e,this.setScrambleKey(r),await t.apply(n,o)}finally{this._appAPIlock=null}}}setTraceContext(e){this.tracer=this.tracer.withContext(e)}updateTraceContext(e){this.tracer.updateContext(e)}getTraceContext(){return this.tracer.getContext()}static ErrorMessage_ListenTimeout="No Ledger device found (timeout)";static ErrorMessage_NoDeviceFound="No Ledger device found"}},81545:function(e,t,n){n.d(t,{O$:function(){return s},cM:function(){return a}});let r=0,o=[],a=(e,t,n)=>{let o={type:e,id:String(++r),date:new Date};t&&(o.message=t),n&&(o.data=n),c(o)},i=({type:e,message:t,data:n,context:o})=>{let a={type:e,id:String(++r),date:new Date};t&&(a.message=t),n&&(a.data=n),o&&(a.context=o),c(a)};class s{type;context;constructor(e,t){this.type=e,this.context=t}trace(e,t){i({type:this.type,message:e,data:t,context:this.context})}getContext(){return this.context}setContext(e){this.context=e}updateContext(e){this.context={...this.context,...e}}getType(){return this.type}setType(e){this.type=e}withType(e){return new s(e,this.context)}withContext(e){return new s(this.type,e)}withUpdatedContext(e){return new s(this.type,{...this.context,...e})}}function c(e){for(let t=0;t<o.length;t++)try{o[t](e)}catch(e){console.error(e)}}"undefined"!=typeof window&&(window.__ledgerLogsListen=e=>(o.push(e),()=>{let t=o.indexOf(e);-1!==t&&(o[t]=o[o.length-1],o.pop())}))}}]);