"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{18167:function(e,t,n){n.d(t,{PB:function(){return eW},RW:function(){return B},cV:function(){return eO}});var a=n(2611),i=n(77378),r=n(85877),s=n(93727),p=n(795),u=n(75423),o=n(88901),y=n(84772),l=n(36735),d=n(69130),m=n(66634),c=n(3431),f=n(2790),b={MAYAN_FORWARDER_CONTRACT:"0x337685fdaB40D39bd02028545a4FfA7D287cC3E2",MAYAN_PROGRAM_ID:"FC4eXxkyrMPTjiYUpp4EAnkmwMbQyZ6NDCh1kfLn6vsf",AUCTION_PROGRAM_ID:"8QJmxZcEzwuYmCPy6XqgN2sHcYCcFq6AEfBMJZZuLo5a",MCTP_PROGRAM_ID:"dkpZqrxHFrhziEMQ931GLtfy11nFkCsfMftH9u6QwBU",SWIFT_PROGRAM_ID:"BLZRi6frs4X4DNLw56V4EXai1b6QVESN1BhHBTYM9VcY",FEE_MANAGER_PROGRAM_ID:"5VtQHnhs2pfVEr68qQsbTRwKh4JV5GTu9mBHgHFxpHeQ",WORMHOLE_PROGRAM_ID:"worm2ZoG2kUd4vFXhvjh93UUH596ayRfgQ2MgjNMTth",CCTP_CORE_PROGRAM_ID:"CCTPmbSD7gX1bxKPAmg77w8oFzNFpaQiQUWD43TKaecd",CCTP_TOKEN_PROGRAM_ID:"CCTPiPYPc6AsJuwueEnWgSgucamXDZwBd53dQ11YiKX3",TOKEN_PROGRAM_ID:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",TOKEN_2022_PROGRAM_ID:"TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb",ASSOCIATED_TOKEN_PROGRAM_ID:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",LOOKUP_TABLE:"75X8YgJPcadksw6Ag3qsYUfi1bsFwDoCKYtqPPqdydAG",EXPLORER_URL:"https://explorer-api.mayan.finance/v3",PRICE_URL:"https://price-api.mayan.finance/v3",RELAYER_URL:"https://relayer-api.mayan.finance/v3"},T=u.sha3_256,h=e=>/^(0x)?[0-9a-fA-F]+::\w+::\w+$/.test(e);function g(e,t){if(1===t)return(0,i.U3)(new s.nh(e).toBytes(),32);if(t===M.ethereum||t===M.bsc||t===M.polygon||t===M.avalanche||t===M.arbitrum||t===M.optimism||t===M.base||t===M.unichain||t===M.linea)return(0,i.U3)(e,32);if(t===M.aptos&&h(e))return`0x${T(e)}`;if(t===M.sui){let t=e.startsWith("0x")?e.substring(2):e;if(32!==p.Buffer.from(t,"hex").length)throw Error("Invalid sui address: "+e);return(0,i.U3)(e,32)}throw console.log(`Unsupported chain id: ${t}`,e),Error("Unsupported token chain")}function I(e){return new Uint8Array(p.Buffer.from(e.startsWith("0x")?e.substring(2):e,"hex"))}function w(e,t,n=!1,a=new s.nh(b.TOKEN_PROGRAM_ID),i=new s.nh(b.ASSOCIATED_TOKEN_PROGRAM_ID)){if(!n&&!s.nh.isOnCurve(t.toBuffer()))throw Error("TokenOwnerOffCurveError");let[r]=s.nh.findProgramAddressSync([t.toBuffer(),a.toBuffer(),e.toBuffer()],i);return r}function A(e,t){if(null==e)throw Error("getAmountOfFractionalAmount: Amount is null or undefined");if("string"!=typeof e&&"number"!=typeof e)throw Error("getAmountOfFractionalAmount: Amount is not a string or number");if("string"==typeof e&&0===e.length)throw Error("getAmountOfFractionalAmount: Amount is empty");if(!Number.isFinite(Number(e)))throw Error("getAmountOfFractionalAmount: Amount is not a number");let n=Math.min(8,Number(t)),a=Number(e).toFixed(n+1),i=RegExp(`^-?\\d+(?:\\.\\d{0,${n}})?`),s=a.match(i);if(!s)throw Error("getAmountOfFractionalAmount: fixedAmount is null");let p=s[0];return(0,r.vz)(p,Number(t))}var M={solana:1,ethereum:2,bsc:4,polygon:5,avalanche:6,arbitrum:23,optimism:24,base:30,aptos:22,sui:21,unichain:44,linea:38},k={1:2,56:4,137:5,43114:6,42161:23,10:24,8453:30,130:44,59144:38},C=[10,6,0];function R(){return C.join("_")}function S(e){return"solana"===e?9:18}var _=BigInt(2)**BigInt(64)-BigInt(1);function E(e){if(e<BigInt(0)||e>_)throw Error(`Invalid u64: ${e}`);let t=p.Buffer.alloc(8);return t.writeBigUInt64LE(e),t}var O={value:BigInt(0),deadline:0,v:0,r:`0x${s.yc.programId.toBuffer().toString("hex")}`,s:`0x${s.yc.programId.toBuffer().toString("hex")}`};function F(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}function D(e,t){return e&&t?"WH"===e.type?t?.solana||null:"MCTP"===e.type||"SWIFT"===e.type?"solana"===e.toChain?t?.solana||null:"sui"===e.toChain?t?.sui||null:t?.evm||null:"FAST_MCTP"===e.type&&"solana"!==e.toChain&&"sui"!==e.toChain&&t?.evm||null:null}function P(e){return Object.entries(e).filter(([e,t])=>null!=t&&!Array.isArray(t)).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`).join("&")}async function v(e){if(e.status.toString().startsWith("5")){let t;try{let n=await e.json();(n?.code||n?.statusCode)&&(n?.message||n?.msg)&&(t={code:n?.code||n?.statusCode,message:n?.message||n?.msg})}catch(e){t=Error("Internal server error")}throw t}}async function B(e,t={swift:!0,mctp:!0,gasless:!1,onlyDirect:!1}){var n;let i=function(e,t={wormhole:!0,swift:!0,mctp:!0,shuttle:!0,gasless:!1,onlyDirect:!1,fastMctp:!0}){let{gasDrop:n,referrerBps:a}=e,i=e.slippageBps;"auto"===i||Number.isFinite(i)||(i=100*e.slippage);let r={wormhole:!1!==t.wormhole,swift:!1!==t.swift,mctp:!1!==t.mctp,shuttle:!0===t.shuttle,fastMctp:!1!==t.fastMctp,gasless:!0===t.gasless,onlyDirect:!0===t.onlyDirect,solanaProgram:b.MAYAN_PROGRAM_ID,forwarderAddress:b.MAYAN_FORWARDER_CONTRACT,amountIn:!e.amountIn64&&Number.isFinite(e.amount)?e.amount:void 0,amountIn64:e.amountIn64,fromToken:e.fromToken,fromChain:e.fromChain,toToken:e.toToken,toChain:e.toChain,slippageBps:i,referrer:e.referrer,referrerBps:Number.isFinite(a)?a:void 0,gasDrop:Number.isFinite(n)?n:void 0,sdkVersion:R()};return`${b.PRICE_URL}/quote?`+P(r)}(e,t),r=await a(i,{method:"GET",redirect:"follow"});await v(r);let s=await r.json();if(200!==r.status&&201!==r.status)throw{code:s?.code||0,message:s?.msg||s?.message||"Route not found",data:s?.data};if(n=s.minimumSdkVersion,C[0]<n[0]||!(C[0]>n[0])&&(C[1]<n[1]||!(C[1]>n[1])&&!(C[2]>=n[2])))throw{code:9999,message:"Swap SDK is outdated!"};return s.quotes}async function W(){let e=await a(`${b.RELAYER_URL}/active-relayers?solanaProgram=${b.MAYAN_PROGRAM_ID}`,{method:"GET",redirect:"follow"});await v(e);let t=await e.json();if(200!==e.status&&201!==e.status)throw t;return t.suggested}async function N(e){let t=P({...e,sdkVersion:R()}),n=await a(`${b.PRICE_URL}/get-swap/solana?${t}`,{method:"GET",redirect:"follow"});await v(n);let i=await n.json();if(200!==n.status&&201!==n.status)throw i;return i}async function x(e){let t=await a(`${b.EXPLORER_URL}/submit/solana`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({signedTx:e})});await v(t);let n=await t.json();if(200!==t.status&&201!==t.status)throw n;return n}var G=[{inputs:[{internalType:"address",name:"_tokenBridge",type:"address"},{internalType:"address",name:"_weth",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint16",name:"emitterChainId",type:"uint16"},{indexed:!0,internalType:"bytes32",name:"emitterAddress",type:"bytes32"},{indexed:!0,internalType:"uint64",name:"sequence",type:"uint64"}],name:"Redeemed",type:"event"},{inputs:[{internalType:"address",name:"newGuardian",type:"address"}],name:"changeGuardian",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimGuardian",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"uint8",name:"payloadId",type:"uint8"},{internalType:"bytes32",name:"tokenAddr",type:"bytes32"},{internalType:"uint16",name:"tokenChainId",type:"uint16"},{internalType:"bytes32",name:"destAddr",type:"bytes32"},{internalType:"uint16",name:"destChainId",type:"uint16"},{internalType:"bytes32",name:"sourceAddr",type:"bytes32"},{internalType:"uint16",name:"sourceChainId",type:"uint16"},{internalType:"uint64",name:"sequence",type:"uint64"},{internalType:"uint64",name:"amountOutMin",type:"uint64"},{internalType:"uint64",name:"deadline",type:"uint64"},{internalType:"uint64",name:"swapFee",type:"uint64"},{internalType:"uint64",name:"redeemFee",type:"uint64"},{internalType:"uint64",name:"refundFee",type:"uint64"},{internalType:"bytes32",name:"auctionAddr",type:"bytes32"},{internalType:"bool",name:"unwrapRedeem",type:"bool"},{internalType:"bool",name:"unwrapRefund",type:"bool"}],internalType:"struct MayanStructs.Swap",name:"s",type:"tuple"}],name:"encodeSwap",outputs:[{internalType:"bytes",name:"encoded",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[],name:"getWeth",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"isPaused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"encoded",type:"bytes"}],name:"parseRedeemPayload",outputs:[{components:[{internalType:"uint8",name:"payloadId",type:"uint8"},{internalType:"bytes32",name:"recipient",type:"bytes32"},{internalType:"uint64",name:"relayerFee",type:"uint64"},{internalType:"bool",name:"unwrap",type:"bool"},{internalType:"uint64",name:"gasDrop",type:"uint64"},{internalType:"bytes",name:"customPayload",type:"bytes"}],internalType:"struct MayanStructs.Redeem",name:"r",type:"tuple"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes",name:"encodedVm",type:"bytes"}],name:"redeem",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes",name:"encodedVm",type:"bytes"}],name:"redeemAndUnwrap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_pause",type:"bool"}],name:"setPause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"uint64",name:"swapFee",type:"uint64"},{internalType:"uint64",name:"redeemFee",type:"uint64"},{internalType:"uint64",name:"refundFee",type:"uint64"}],internalType:"struct MayanSwap.RelayerFees",name:"relayerFees",type:"tuple"},{components:[{internalType:"bytes32",name:"mayanAddr",type:"bytes32"},{internalType:"uint16",name:"mayanChainId",type:"uint16"},{internalType:"bytes32",name:"auctionAddr",type:"bytes32"},{internalType:"bytes32",name:"destAddr",type:"bytes32"},{internalType:"uint16",name:"destChainId",type:"uint16"},{internalType:"bytes32",name:"referrer",type:"bytes32"},{internalType:"bytes32",name:"refundAddr",type:"bytes32"}],internalType:"struct MayanSwap.Recepient",name:"recipient",type:"tuple"},{internalType:"bytes32",name:"tokenOutAddr",type:"bytes32"},{internalType:"uint16",name:"tokenOutChainId",type:"uint16"},{components:[{internalType:"uint256",name:"transferDeadline",type:"uint256"},{internalType:"uint64",name:"swapDeadline",type:"uint64"},{internalType:"uint64",name:"amountOutMin",type:"uint64"},{internalType:"bool",name:"unwrap",type:"bool"},{internalType:"uint64",name:"gasDrop",type:"uint64"},{internalType:"bytes",name:"customPayload",type:"bytes"}],internalType:"struct MayanSwap.Criteria",name:"criteria",type:"tuple"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"swap",outputs:[{internalType:"uint64",name:"sequence",type:"uint64"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address payable",name:"to",type:"address"}],name:"sweepEth",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"to",type:"address"}],name:"sweepToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"uint64",name:"swapFee",type:"uint64"},{internalType:"uint64",name:"redeemFee",type:"uint64"},{internalType:"uint64",name:"refundFee",type:"uint64"}],internalType:"struct MayanSwap.RelayerFees",name:"relayerFees",type:"tuple"},{components:[{internalType:"bytes32",name:"mayanAddr",type:"bytes32"},{internalType:"uint16",name:"mayanChainId",type:"uint16"},{internalType:"bytes32",name:"auctionAddr",type:"bytes32"},{internalType:"bytes32",name:"destAddr",type:"bytes32"},{internalType:"uint16",name:"destChainId",type:"uint16"},{internalType:"bytes32",name:"referrer",type:"bytes32"},{internalType:"bytes32",name:"refundAddr",type:"bytes32"}],internalType:"struct MayanSwap.Recepient",name:"recipient",type:"tuple"},{internalType:"bytes32",name:"tokenOutAddr",type:"bytes32"},{internalType:"uint16",name:"tokenOutChainId",type:"uint16"},{components:[{internalType:"uint256",name:"transferDeadline",type:"uint256"},{internalType:"uint64",name:"swapDeadline",type:"uint64"},{internalType:"uint64",name:"amountOutMin",type:"uint64"},{internalType:"bool",name:"unwrap",type:"bool"},{internalType:"uint64",name:"gasDrop",type:"uint64"},{internalType:"bytes",name:"customPayload",type:"bytes"}],internalType:"struct MayanSwap.Criteria",name:"criteria",type:"tuple"}],name:"wrapAndSwapETH",outputs:[{internalType:"uint64",name:"sequence",type:"uint64"}],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}],U=[{inputs:[{internalType:"address",name:"_guardian",type:"address"},{internalType:"address[]",name:"_swapProtocols",type:"address[]"},{internalType:"address[]",name:"_mayanProtocols",type:"address[]"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"UnsupportedProtocol",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"address",name:"mayanProtocol",type:"address"},{indexed:!1,internalType:"bytes",name:"protocolData",type:"bytes"}],name:"ForwardedERC20",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"mayanProtocol",type:"address"},{indexed:!1,internalType:"bytes",name:"protocolData",type:"bytes"}],name:"ForwardedEth",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"SwapAndForwarded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"tokenIn",type:"address"},{indexed:!1,internalType:"uint256",name:"amountIn",type:"uint256"},{indexed:!1,internalType:"address",name:"swapProtocol",type:"address"},{indexed:!1,internalType:"address",name:"middleToken",type:"address"},{indexed:!1,internalType:"uint256",name:"middleAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"mayanProtocol",type:"address"},{indexed:!1,internalType:"bytes",name:"mayanData",type:"bytes"}],name:"SwapAndForwardedERC20",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amountIn",type:"uint256"},{indexed:!1,internalType:"address",name:"swapProtocol",type:"address"},{indexed:!1,internalType:"address",name:"middleToken",type:"address"},{indexed:!1,internalType:"uint256",name:"middleAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"mayanProtocol",type:"address"},{indexed:!1,internalType:"bytes",name:"mayanData",type:"bytes"}],name:"SwapAndForwardedEth",type:"event"},{inputs:[{internalType:"address",name:"newGuardian",type:"address"}],name:"changeGuardian",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimGuardian",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{components:[{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct MayanForwarder.PermitParams",name:"permitParams",type:"tuple"},{internalType:"address",name:"mayanProtocol",type:"address"},{internalType:"bytes",name:"protocolData",type:"bytes"}],name:"forwardERC20",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"mayanProtocol",type:"address"},{internalType:"bytes",name:"protocolData",type:"bytes"}],name:"forwardEth",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"guardian",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"mayanProtocols",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextGuardian",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address payable",name:"to",type:"address"}],name:"rescueEth",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"to",type:"address"}],name:"rescueToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"mayanProtocol",type:"address"},{internalType:"bool",name:"enabled",type:"bool"}],name:"setMayanProtocol",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"swapProtocol",type:"address"},{internalType:"bool",name:"enabled",type:"bool"}],name:"setSwapProtocol",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{components:[{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct MayanForwarder.PermitParams",name:"permitParams",type:"tuple"},{internalType:"address",name:"swapProtocol",type:"address"},{internalType:"bytes",name:"swapData",type:"bytes"},{internalType:"address",name:"middleToken",type:"address"},{internalType:"uint256",name:"minMiddleAmount",type:"uint256"},{internalType:"address",name:"mayanProtocol",type:"address"},{internalType:"bytes",name:"mayanData",type:"bytes"}],name:"swapAndForwardERC20",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"address",name:"swapProtocol",type:"address"},{internalType:"bytes",name:"swapData",type:"bytes"},{internalType:"address",name:"middleToken",type:"address"},{internalType:"uint256",name:"minMiddleAmount",type:"uint256"},{internalType:"address",name:"mayanProtocol",type:"address"},{internalType:"bytes",name:"mayanData",type:"bytes"}],name:"swapAndForwardEth",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"swapProtocols",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],K=[{inputs:[{internalType:"address",name:"_cctpTokenMessenger",type:"address"},{internalType:"address",name:"_wormhole",type:"address"},{internalType:"address",name:"_feeManager",type:"address"},{internalType:"uint16",name:"_auctionChainId",type:"uint16"},{internalType:"bytes32",name:"_auctionAddr",type:"bytes32"},{internalType:"uint8",name:"_consistencyLevel",type:"uint8"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"CallerAlreadySet",type:"error"},{inputs:[],name:"CallerNotSet",type:"error"},{inputs:[],name:"CctpReceiveFailed",type:"error"},{inputs:[],name:"DeadlineViolation",type:"error"},{inputs:[],name:"DomainAlreadySet",type:"error"},{inputs:[],name:"DomainNotSet",type:"error"},{inputs:[],name:"EmitterAlreadySet",type:"error"},{inputs:[],name:"EthTransferFailed",type:"error"},{inputs:[],name:"InvalidAction",type:"error"},{inputs:[],name:"InvalidAddress",type:"error"},{inputs:[],name:"InvalidAmountOut",type:"error"},{inputs:[],name:"InvalidCaller",type:"error"},{inputs:[],name:"InvalidDestAddr",type:"error"},{inputs:[],name:"InvalidDomain",type:"error"},{inputs:[],name:"InvalidEmitter",type:"error"},{inputs:[],name:"InvalidGasDrop",type:"error"},{inputs:[],name:"InvalidMintRecipient",type:"error"},{inputs:[],name:"InvalidNonce",type:"error"},{inputs:[],name:"InvalidOrder",type:"error"},{inputs:[],name:"InvalidPayload",type:"error"},{inputs:[],name:"InvalidProtocolFee",type:"error"},{inputs:[],name:"InvalidRedeemFee",type:"error"},{inputs:[],name:"InvalidReferrerFee",type:"error"},{inputs:[],name:"MintRecipientAlreadySet",type:"error"},{inputs:[],name:"MintRecipientNotSet",type:"error"},{inputs:[],name:"Paused",type:"error"},{inputs:[],name:"Unauthorized",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint32",name:"sourceDomain",type:"uint32"},{indexed:!1,internalType:"uint64",name:"sourceNonce",type:"uint64"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"OrderFulfilled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint32",name:"sourceDomain",type:"uint32"},{indexed:!1,internalType:"uint64",name:"sourceNonce",type:"uint64"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"OrderRefunded",type:"event"},{inputs:[],name:"auctionAddr",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"auctionChainId",outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint64",name:"redeemFee",type:"uint64"},{internalType:"uint64",name:"gasDrop",type:"uint64"},{internalType:"bytes32",name:"destAddr",type:"bytes32"},{internalType:"uint32",name:"destDomain",type:"uint32"},{internalType:"uint8",name:"payloadType",type:"uint8"},{internalType:"bytes",name:"customPayload",type:"bytes"}],name:"bridgeWithFee",outputs:[{internalType:"uint64",name:"sequence",type:"uint64"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint64",name:"gasDrop",type:"uint64"},{internalType:"uint256",name:"redeemFee",type:"uint256"},{internalType:"uint32",name:"destDomain",type:"uint32"},{internalType:"bytes32",name:"destAddr",type:"bytes32"}],name:"bridgeWithLockedFee",outputs:[{internalType:"uint64",name:"cctpNonce",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"cctpTokenMessenger",outputs:[{internalType:"contract ITokenMessenger",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint16",name:"",type:"uint16"}],name:"chainIdToEmitter",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newGuardian",type:"address"}],name:"changeGuardian",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimGuardian",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"consistencyLevel",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint64",name:"gasDrop",type:"uint64"},{internalType:"bytes32",name:"destAddr",type:"bytes32"},{internalType:"uint16",name:"destChain",type:"uint16"},{internalType:"bytes32",name:"tokenOut",type:"bytes32"},{internalType:"uint64",name:"minAmountOut",type:"uint64"},{internalType:"uint64",name:"deadline",type:"uint64"},{internalType:"uint64",name:"redeemFee",type:"uint64"},{internalType:"bytes32",name:"referrerAddr",type:"bytes32"},{internalType:"uint8",name:"referrerBps",type:"uint8"}],internalType:"struct MayanCircle.OrderParams",name:"params",type:"tuple"}],name:"createOrder",outputs:[{internalType:"uint64",name:"sequence",type:"uint64"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint32",name:"",type:"uint32"}],name:"domainToCaller",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"feeManager",outputs:[{internalType:"contract IFeeManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"",type:"uint64"}],name:"feeStorage",outputs:[{internalType:"bytes32",name:"destAddr",type:"bytes32"},{internalType:"uint64",name:"gasDrop",type:"uint64"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"redeemFee",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"cctpMsg",type:"bytes"},{internalType:"bytes",name:"cctpSigs",type:"bytes"},{internalType:"bytes",name:"encodedVm",type:"bytes"},{components:[{internalType:"bytes32",name:"destAddr",type:"bytes32"},{internalType:"uint16",name:"destChainId",type:"uint16"},{internalType:"bytes32",name:"tokenOut",type:"bytes32"},{internalType:"uint64",name:"promisedAmount",type:"uint64"},{internalType:"uint64",name:"gasDrop",type:"uint64"},{internalType:"uint64",name:"redeemFee",type:"uint64"},{internalType:"uint64",name:"deadline",type:"uint64"},{internalType:"bytes32",name:"referrerAddr",type:"bytes32"},{internalType:"uint8",name:"referrerBps",type:"uint8"},{internalType:"uint8",name:"protocolBps",type:"uint8"},{internalType:"bytes32",name:"driver",type:"bytes32"}],internalType:"struct MayanCircle.FulfillParams",name:"params",type:"tuple"},{internalType:"address",name:"swapProtocol",type:"address"},{internalType:"bytes",name:"swapData",type:"bytes"}],name:"fulfillOrder",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint16",name:"chainId",type:"uint16"}],name:"getDomain",outputs:[{internalType:"uint32",name:"domain",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"guardian",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"isPaused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"keyToMintRecipient",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"localDomain",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"cctpMsg",type:"bytes"},{internalType:"bytes",name:"cctpSigs",type:"bytes"},{internalType:"bytes",name:"encodedVm",type:"bytes"},{components:[{internalType:"uint8",name:"payloadType",type:"uint8"},{internalType:"bytes32",name:"destAddr",type:"bytes32"},{internalType:"uint64",name:"gasDrop",type:"uint64"},{internalType:"uint64",name:"redeemFee",type:"uint64"},{internalType:"uint64",name:"burnAmount",type:"uint64"},{internalType:"bytes32",name:"burnToken",type:"bytes32"},{internalType:"bytes32",name:"customPayload",type:"bytes32"}],internalType:"struct MayanCircle.BridgeWithFeeParams",name:"bridgeParams",type:"tuple"}],name:"redeemWithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes",name:"cctpMsg",type:"bytes"},{internalType:"bytes",name:"cctpSigs",type:"bytes"},{internalType:"bytes32",name:"unlockerAddr",type:"bytes32"}],name:"redeemWithLockedFee",outputs:[{internalType:"uint64",name:"sequence",type:"uint64"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint32",name:"cctpNonce",type:"uint32"},{internalType:"uint32",name:"cctpDomain",type:"uint32"},{internalType:"bytes32",name:"destAddr",type:"bytes32"},{internalType:"bytes32",name:"unlockerAddr",type:"bytes32"}],name:"refineFee",outputs:[{internalType:"uint64",name:"sequence",type:"uint64"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes",name:"encodedVm",type:"bytes"},{internalType:"bytes",name:"cctpMsg",type:"bytes"},{internalType:"bytes",name:"cctpSigs",type:"bytes"},{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint64",name:"gasDrop",type:"uint64"},{internalType:"bytes32",name:"destAddr",type:"bytes32"},{internalType:"uint16",name:"destChain",type:"uint16"},{internalType:"bytes32",name:"tokenOut",type:"bytes32"},{internalType:"uint64",name:"minAmountOut",type:"uint64"},{internalType:"uint64",name:"deadline",type:"uint64"},{internalType:"uint64",name:"redeemFee",type:"uint64"},{internalType:"bytes32",name:"referrerAddr",type:"bytes32"},{internalType:"uint8",name:"referrerBps",type:"uint8"}],internalType:"struct MayanCircle.OrderParams",name:"orderParams",type:"tuple"},{components:[{internalType:"bytes32",name:"trader",type:"bytes32"},{internalType:"uint16",name:"sourceChainId",type:"uint16"},{internalType:"uint8",name:"protocolBps",type:"uint8"}],internalType:"struct MayanCircle.ExtraParams",name:"extraParams",type:"tuple"}],name:"refund",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address payable",name:"to",type:"address"}],name:"rescueEth",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"to",type:"address"}],name:"rescueToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint8",name:"_consistencyLevel",type:"uint8"}],name:"setConsistencyLevel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint16",name:"chainId",type:"uint16"},{internalType:"uint32",name:"domain",type:"uint32"}],name:"setDomain",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"domain",type:"uint32"},{internalType:"bytes32",name:"caller",type:"bytes32"}],name:"setDomainCaller",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint16",name:"chainId",type:"uint16"},{internalType:"bytes32",name:"emitter",type:"bytes32"}],name:"setEmitter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_feeManager",type:"address"}],name:"setFeeManager",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"destDomain",type:"uint32"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"bytes32",name:"mintRecipient",type:"bytes32"}],name:"setMintRecipient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_pause",type:"bool"}],name:"setPause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"encodedVm",type:"bytes"},{components:[{internalType:"uint8",name:"action",type:"uint8"},{internalType:"uint8",name:"payloadType",type:"uint8"},{internalType:"uint64",name:"cctpNonce",type:"uint64"},{internalType:"uint32",name:"cctpDomain",type:"uint32"},{internalType:"bytes32",name:"unlockerAddr",type:"bytes32"},{internalType:"uint64",name:"gasDrop",type:"uint64"}],internalType:"struct MayanCircle.UnlockFeeMsg",name:"unlockMsg",type:"tuple"}],name:"unlockFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"encodedVm1",type:"bytes"},{internalType:"bytes",name:"encodedVm2",type:"bytes"},{components:[{internalType:"uint8",name:"action",type:"uint8"},{internalType:"uint8",name:"payloadType",type:"uint8"},{internalType:"uint64",name:"cctpNonce",type:"uint64"},{internalType:"uint32",name:"cctpDomain",type:"uint32"},{internalType:"bytes32",name:"unlockerAddr",type:"bytes32"},{internalType:"uint64",name:"gasDrop",type:"uint64"}],internalType:"struct MayanCircle.UnlockFeeMsg",name:"unlockMsg",type:"tuple"},{components:[{internalType:"uint8",name:"action",type:"uint8"},{internalType:"uint8",name:"payloadType",type:"uint8"},{internalType:"uint64",name:"cctpNonce",type:"uint64"},{internalType:"uint32",name:"cctpDomain",type:"uint32"},{internalType:"bytes32",name:"unlockerAddr",type:"bytes32"},{internalType:"uint64",name:"gasDrop",type:"uint64"},{internalType:"bytes32",name:"destAddr",type:"bytes32"}],internalType:"struct MayanCircle.UnlockRefinedFeeMsg",name:"refinedMsg",type:"tuple"}],name:"unlockFeeRefined",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"wormhole",outputs:[{internalType:"contract IWormhole",name:"",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}];function L(e){switch(e){case"ethereum":return 0;case"avalanche":return 1;case"optimism":return 2;case"arbitrum":return 3;case"solana":return 5;case"base":return 6;case"polygon":return 7;case"sui":return 8;case"unichain":return 10;case"linea":return 11;default:throw Error("unsupported chain for cctp")}}function q(e,t){let n=new s.nh(b.CCTP_CORE_PROGRAM_ID),a=new s.nh(b.CCTP_TOKEN_PROGRAM_ID),[i]=s.nh.findProgramAddressSync([p.Buffer.from("message_transmitter")],n),[r]=s.nh.findProgramAddressSync([p.Buffer.from("sender_authority")],a),[u]=s.nh.findProgramAddressSync([p.Buffer.from("local_token"),e.toBytes()],a),[o]=s.nh.findProgramAddressSync([p.Buffer.from("token_messenger")],a),[y]=s.nh.findProgramAddressSync([p.Buffer.from("token_minter")],a),l=L(t),[d]=s.nh.findProgramAddressSync([p.Buffer.from("remote_token_messenger"),p.Buffer.from(l.toString())],a),[m]=s.nh.findProgramAddressSync([p.Buffer.from("__event_authority")],n),[c]=s.nh.findProgramAddressSync([p.Buffer.from("__event_authority")],a);return{messageTransmitter:i,senderAuthority:r,remoteTokenMessengerKey:d,tokenMessenger:o,tokenMinter:y,eventAuthToken:c,eventAuthCore:m,localToken:u}}function H(e,t,n,a){let i=function(e,t,n,a){let i=k[Number(n)],r=M[e.fromChain],s=M[e.toChain];if(r!==i)throw Error(`Signer chain id(${Number(n)}) and quote from chain are not same! ${r} !== ${i}`);let u=e.cheaperChain===e.fromChain;if(u&&a)throw Error("Bridge lock fee cannot have custom payload");let o=g(t,s),y=A(e.redeemRelayerFee,6),l=A(e.gasDrop,Math.min(S(e.toChain),8)),d=BigInt(e.effectiveAmountIn64),m=L(e.toChain);if(!e.mctpMayanContract)throw Error("MCTP contract address is missing");let c=e.mctpMayanContract;if("solana"===e.toChain&&u)throw Error("Cannot lock fee for transfer to solana");let f=A(e.bridgeFee,S(e.fromChain));return u&&(f=BigInt(0)),{lockFee:u,tokenIn:e.mctpInputContract,amountIn:d,redeemFee:y,gasDrop:l,destAddr:o,destDomain:m,payloadType:a?2:1,customPayload:a?`0x${p.Buffer.from(a).toString("hex")}`:"0x",bridgeFee:f,contractAddress:c}}(e,t,n,a),{contractAddress:r,tokenIn:s,amountIn:u,destAddr:o,lockFee:d,redeemFee:m,gasDrop:c,destDomain:f,customPayload:b,payloadType:T,bridgeFee:h}=i,I=new y.CH(r,K);return{to:r,data:d?I.interface.encodeFunctionData("bridgeWithLockedFee",[s,u,c,m,f,o]):I.interface.encodeFunctionData("bridgeWithFee",[s,u,m,c,o,f,T,b]),value:(0,l.m9)(h),_params:i}}function $(e,t,n,a){let i=function(e,t,n,a){let i;let r=k[Number(a)],p=M[e.fromChain],u=M[e.toChain];if(p!==r)throw Error(`Signer chain id(${Number(a)}) and quote from chain are not same! ${p} !== ${r}`);if(!e.mctpMayanContract)throw Error("MCTP contract address is missing");let y=e.mctpMayanContract,l=g(t,u);i=n?g(n,u):g(s.yc.programId.toString(),M.solana);let d=A(e.redeemRelayerFee,6),m=A(e.gasDrop,Math.min(S(e.toChain),8)),c=BigInt(e.effectiveAmountIn64),f=A(e.minAmountOut,Math.min(8,e.toToken.decimals)),b=BigInt(e.deadline64),T=e.toToken.contract===o.N?g(s.yc.programId.toString(),M.solana):g("sui"===e.toChain?e.toToken.verifiedAddress:e.toToken.contract,e.toToken.wChainId);return{params:{tokenIn:e.mctpInputContract,amountIn:c,gasDrop:m,destAddr:l,destChain:u,tokenOut:T,minAmountOut:f,deadline:b,redeemFee:d,referrerAddr:i,referrerBps:e.referrerBps||0},bridgeFee:A(e.bridgeFee,S(e.fromChain)),contractAddress:y}}(e,t,n,a),{contractAddress:r,params:p,bridgeFee:u}=i,d=new y.CH(r,K).interface.encodeFunctionData("createOrder",[p]);return{to:r,data:d,value:(0,l.m9)(u),_params:i}}var Y=[{inputs:[{internalType:"address",name:"_wormhole",type:"address"},{internalType:"address",name:"_feeManager",type:"address"},{internalType:"uint16",name:"_auctionChainId",type:"uint16"},{internalType:"bytes32",name:"_auctionAddr",type:"bytes32"},{internalType:"bytes32",name:"_solanaEmitter",type:"bytes32"},{internalType:"uint8",name:"_consistencyLevel",type:"uint8"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"DeadlineViolation",type:"error"},{inputs:[],name:"DuplicateOrder",type:"error"},{inputs:[],name:"FeesTooHigh",type:"error"},{inputs:[],name:"InvalidAction",type:"error"},{inputs:[],name:"InvalidAmount",type:"error"},{inputs:[],name:"InvalidAuctionMode",type:"error"},{inputs:[],name:"InvalidBpsFee",type:"error"},{inputs:[],name:"InvalidContractSignature",type:"error"},{inputs:[],name:"InvalidDestChain",type:"error"},{inputs:[],name:"InvalidEmitterAddress",type:"error"},{inputs:[],name:"InvalidEmitterChain",type:"error"},{inputs:[],name:"InvalidEvmAddr",type:"error"},{inputs:[],name:"InvalidGasDrop",type:"error"},{inputs:[],name:"InvalidOrderHash",type:"error"},{inputs:[],name:"InvalidOrderStatus",type:"error"},{inputs:[],name:"InvalidSignature",type:"error"},{inputs:[],name:"InvalidSignatureLength",type:"error"},{inputs:[],name:"InvalidSigner",type:"error"},{inputs:[],name:"InvalidSrcChain",type:"error"},{inputs:[],name:"InvalidWormholeFee",type:"error"},{inputs:[],name:"OrderNotExists",type:"error"},{inputs:[],name:"Paused",type:"error"},{inputs:[],name:"SmallAmountIn",type:"error"},{inputs:[],name:"Unauthorized",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"key",type:"bytes32"},{indexed:!1,internalType:"uint64",name:"sequence",type:"uint64"}],name:"OrderCanceled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"key",type:"bytes32"}],name:"OrderCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"key",type:"bytes32"},{indexed:!1,internalType:"uint64",name:"sequence",type:"uint64"},{indexed:!1,internalType:"uint256",name:"netAmount",type:"uint256"}],name:"OrderFulfilled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"key",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"netAmount",type:"uint256"}],name:"OrderRefunded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"key",type:"bytes32"}],name:"OrderUnlocked",type:"event"},{inputs:[],name:"auctionAddr",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"auctionChainId",outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"tokenIn",type:"bytes32"},{components:[{internalType:"bytes32",name:"trader",type:"bytes32"},{internalType:"bytes32",name:"tokenOut",type:"bytes32"},{internalType:"uint64",name:"minAmountOut",type:"uint64"},{internalType:"uint64",name:"gasDrop",type:"uint64"},{internalType:"uint64",name:"cancelFee",type:"uint64"},{internalType:"uint64",name:"refundFee",type:"uint64"},{internalType:"uint64",name:"deadline",type:"uint64"},{internalType:"bytes32",name:"destAddr",type:"bytes32"},{internalType:"uint16",name:"destChainId",type:"uint16"},{internalType:"bytes32",name:"referrerAddr",type:"bytes32"},{internalType:"uint8",name:"referrerBps",type:"uint8"},{internalType:"uint8",name:"auctionMode",type:"uint8"},{internalType:"bytes32",name:"random",type:"bytes32"}],internalType:"struct MayanSwift.OrderParams",name:"params",type:"tuple"},{internalType:"uint16",name:"srcChainId",type:"uint16"},{internalType:"uint8",name:"protocolBps",type:"uint8"},{internalType:"bytes32",name:"canceler",type:"bytes32"}],name:"cancelOrder",outputs:[{internalType:"uint64",name:"sequence",type:"uint64"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"newGuardian",type:"address"}],name:"changeGuardian",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimGuardian",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"consistencyLevel",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"trader",type:"bytes32"},{internalType:"bytes32",name:"tokenOut",type:"bytes32"},{internalType:"uint64",name:"minAmountOut",type:"uint64"},{internalType:"uint64",name:"gasDrop",type:"uint64"},{internalType:"uint64",name:"cancelFee",type:"uint64"},{internalType:"uint64",name:"refundFee",type:"uint64"},{internalType:"uint64",name:"deadline",type:"uint64"},{internalType:"bytes32",name:"destAddr",type:"bytes32"},{internalType:"uint16",name:"destChainId",type:"uint16"},{internalType:"bytes32",name:"referrerAddr",type:"bytes32"},{internalType:"uint8",name:"referrerBps",type:"uint8"},{internalType:"uint8",name:"auctionMode",type:"uint8"},{internalType:"bytes32",name:"random",type:"bytes32"}],internalType:"struct MayanSwift.OrderParams",name:"params",type:"tuple"}],name:"createOrderWithEth",outputs:[{internalType:"bytes32",name:"orderHash",type:"bytes32"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{components:[{internalType:"bytes32",name:"trader",type:"bytes32"},{internalType:"bytes32",name:"tokenOut",type:"bytes32"},{internalType:"uint64",name:"minAmountOut",type:"uint64"},{internalType:"uint64",name:"gasDrop",type:"uint64"},{internalType:"uint64",name:"cancelFee",type:"uint64"},{internalType:"uint64",name:"refundFee",type:"uint64"},{internalType:"uint64",name:"deadline",type:"uint64"},{internalType:"bytes32",name:"destAddr",type:"bytes32"},{internalType:"uint16",name:"destChainId",type:"uint16"},{internalType:"bytes32",name:"referrerAddr",type:"bytes32"},{internalType:"uint8",name:"referrerBps",type:"uint8"},{internalType:"uint8",name:"auctionMode",type:"uint8"},{internalType:"bytes32",name:"random",type:"bytes32"}],internalType:"struct MayanSwift.OrderParams",name:"params",type:"tuple"},{internalType:"bytes",name:"signedOrderHash",type:"bytes"}],name:"createOrderWithSig",outputs:[{internalType:"bytes32",name:"orderHash",type:"bytes32"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{components:[{internalType:"bytes32",name:"trader",type:"bytes32"},{internalType:"bytes32",name:"tokenOut",type:"bytes32"},{internalType:"uint64",name:"minAmountOut",type:"uint64"},{internalType:"uint64",name:"gasDrop",type:"uint64"},{internalType:"uint64",name:"cancelFee",type:"uint64"},{internalType:"uint64",name:"refundFee",type:"uint64"},{internalType:"uint64",name:"deadline",type:"uint64"},{internalType:"bytes32",name:"destAddr",type:"bytes32"},{internalType:"uint16",name:"destChainId",type:"uint16"},{internalType:"bytes32",name:"referrerAddr",type:"bytes32"},{internalType:"uint8",name:"referrerBps",type:"uint8"},{internalType:"uint8",name:"auctionMode",type:"uint8"},{internalType:"bytes32",name:"random",type:"bytes32"}],internalType:"struct MayanSwift.OrderParams",name:"params",type:"tuple"}],name:"createOrderWithToken",outputs:[{internalType:"bytes32",name:"orderHash",type:"bytes32"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"feeManager",outputs:[{internalType:"contract IFeeManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"fulfillAmount",type:"uint256"},{internalType:"bytes",name:"encodedVm",type:"bytes"},{internalType:"bytes32",name:"recepient",type:"bytes32"},{internalType:"bool",name:"batch",type:"bool"}],name:"fulfillOrder",outputs:[{internalType:"uint64",name:"sequence",type:"uint64"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"fulfillAmount",type:"uint256"},{internalType:"bytes32",name:"orderHash",type:"bytes32"},{internalType:"uint16",name:"srcChainId",type:"uint16"},{internalType:"bytes32",name:"tokenIn",type:"bytes32"},{internalType:"uint8",name:"protocolBps",type:"uint8"},{components:[{internalType:"bytes32",name:"trader",type:"bytes32"},{internalType:"bytes32",name:"tokenOut",type:"bytes32"},{internalType:"uint64",name:"minAmountOut",type:"uint64"},{internalType:"uint64",name:"gasDrop",type:"uint64"},{internalType:"uint64",name:"cancelFee",type:"uint64"},{internalType:"uint64",name:"refundFee",type:"uint64"},{internalType:"uint64",name:"deadline",type:"uint64"},{internalType:"bytes32",name:"destAddr",type:"bytes32"},{internalType:"uint16",name:"destChainId",type:"uint16"},{internalType:"bytes32",name:"referrerAddr",type:"bytes32"},{internalType:"uint8",name:"referrerBps",type:"uint8"},{internalType:"uint8",name:"auctionMode",type:"uint8"},{internalType:"bytes32",name:"random",type:"bytes32"}],internalType:"struct MayanSwift.OrderParams",name:"params",type:"tuple"},{internalType:"bytes32",name:"recepient",type:"bytes32"},{internalType:"bool",name:"batch",type:"bool"}],name:"fulfillSimple",outputs:[{internalType:"uint64",name:"sequence",type:"uint64"}],stateMutability:"payable",type:"function"},{inputs:[],name:"guardian",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextGuardian",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"orders",outputs:[{internalType:"enum MayanSwift.Status",name:"status",type:"uint8"},{internalType:"uint64",name:"amountIn",type:"uint64"},{internalType:"uint16",name:"destChainId",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"encoded",type:"bytes"}],name:"parseFulfillPayload",outputs:[{components:[{internalType:"uint8",name:"action",type:"uint8"},{internalType:"bytes32",name:"orderHash",type:"bytes32"},{internalType:"uint16",name:"destChainId",type:"uint16"},{internalType:"bytes32",name:"destAddr",type:"bytes32"},{internalType:"bytes32",name:"driver",type:"bytes32"},{internalType:"bytes32",name:"tokenOut",type:"bytes32"},{internalType:"uint64",name:"promisedAmount",type:"uint64"},{internalType:"uint64",name:"gasDrop",type:"uint64"},{internalType:"uint64",name:"deadline",type:"uint64"},{internalType:"bytes32",name:"referrerAddr",type:"bytes32"},{internalType:"uint8",name:"referrerBps",type:"uint8"},{internalType:"uint8",name:"protocolBps",type:"uint8"},{internalType:"uint16",name:"srcChainId",type:"uint16"},{internalType:"bytes32",name:"tokenIn",type:"bytes32"}],internalType:"struct MayanSwift.FulfillMsg",name:"fulfillMsg",type:"tuple"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes",name:"encoded",type:"bytes"}],name:"parseRefundPayload",outputs:[{components:[{internalType:"uint8",name:"action",type:"uint8"},{internalType:"bytes32",name:"orderHash",type:"bytes32"},{internalType:"uint16",name:"srcChainId",type:"uint16"},{internalType:"bytes32",name:"tokenIn",type:"bytes32"},{internalType:"bytes32",name:"recipient",type:"bytes32"},{internalType:"bytes32",name:"canceler",type:"bytes32"},{internalType:"uint64",name:"cancelFee",type:"uint64"},{internalType:"uint64",name:"refundFee",type:"uint64"}],internalType:"struct MayanSwift.RefundMsg",name:"refundMsg",type:"tuple"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes",name:"encoded",type:"bytes"}],name:"parseUnlockPayload",outputs:[{components:[{internalType:"uint8",name:"action",type:"uint8"},{internalType:"bytes32",name:"orderHash",type:"bytes32"},{internalType:"uint16",name:"srcChainId",type:"uint16"},{internalType:"bytes32",name:"tokenIn",type:"bytes32"},{internalType:"bytes32",name:"recipient",type:"bytes32"}],internalType:"struct MayanSwift.UnlockMsg",name:"unlockMsg",type:"tuple"}],stateMutability:"pure",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32[]",name:"orderHashes",type:"bytes32[]"}],name:"postBatch",outputs:[{internalType:"uint64",name:"sequence",type:"uint64"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes",name:"encodedVm",type:"bytes"}],name:"refundOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint8",name:"_consistencyLevel",type:"uint8"}],name:"setConsistencyLevel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_feeManager",type:"address"}],name:"setFeeManager",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_pause",type:"bool"}],name:"setPause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"solanaEmitter",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"encodedVm",type:"bytes"}],name:"unlockBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"unlockMsgs",outputs:[{internalType:"uint8",name:"action",type:"uint8"},{internalType:"bytes32",name:"orderHash",type:"bytes32"},{internalType:"uint16",name:"srcChainId",type:"uint16"},{internalType:"bytes32",name:"tokenIn",type:"bytes32"},{internalType:"bytes32",name:"recipient",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"encodedVm",type:"bytes"}],name:"unlockSingle",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"wormhole",outputs:[{internalType:"contract IWormhole",name:"",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],V={};function z(e){return V[e]??=new s.ew(e),new s.ew(e)}async function j({trx:e,connection:t,errorChance:n,extraRpcs:a,options:i,rate:r=8}){let s=null,p=0,u=[t].concat(a.map(z));for(let t=0;t<r;t++){if(s)try{let t=await Promise.any(u.map(e=>e.getSignatureStatus(s)));if(t&&t.value){if(t.value.err){if(p>=n)return{signature:s,serializedTrx:e};p++}else if("confirmed"===t.value.confirmationStatus)return{signature:s,serializedTrx:e}}}catch(e){console.error(e)}let a=u.map(t=>t.sendRawTransaction(e,i));if(!s)try{s=await Promise.any(a)}catch(e){console.error("Transaction not submitted, remaining attempts:",r-t-1,e)}await F(1e3)}if(!s)throw Error("Failed to send transaction");return{signature:s,serializedTrx:e}}function Q(e,t,n,a,i=new s.nh(b.TOKEN_PROGRAM_ID),r=new s.nh(b.ASSOCIATED_TOKEN_PROGRAM_ID)){let u=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:s.yc.programId,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:s.ze,isSigner:!1,isWritable:!1}];return new s.Sl({keys:u,programId:r,data:p.Buffer.alloc(0)})}async function J(e,t,n,a,i,r=new s.nh(b.TOKEN_PROGRAM_ID)){let u=[],o=await e.getMinimumBalanceForRentExemption(165);return u.push(s.yc.createAccount({fromPubkey:t,newAccountPubkey:i.publicKey,lamports:o,space:165,programId:r})),u.push(new s.Sl({keys:[{pubkey:i.publicKey,isWritable:!0,isSigner:!1},{pubkey:n,isWritable:!1,isSigner:!1},{pubkey:a,isWritable:!1,isSigner:!1},{pubkey:s.ze,isWritable:!1,isSigner:!1}],programId:r,data:p.Buffer.from([1])})),u}var X=(0,d.n_)([(0,d.u8)("instruction"),(0,d.Ik)(8,"amount")]),Z=(0,d.n_)([(0,d.u8)("instruction")]);function ee(e){let t=p.Buffer.alloc(Z.span);return Z.encode({instruction:17},t),new s.Sl({keys:[{pubkey:e,isSigner:!1,isWritable:!0}],programId:new s.nh(b.TOKEN_PROGRAM_ID),data:t})}(0,d.n_)([(0,d.u8)("instruction")]);var et=(0,d.n_)([(0,d.u8)("instruction"),(0,d.Ik)(8,"amount")]);function en(e,t,n,a,i=new s.nh(b.TOKEN_PROGRAM_ID)){let r=p.Buffer.alloc(et.span);return et.encode({instruction:3,amount:E(a)},r),new s.Sl({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:i,data:r})}var ea=new s.nh("So11111111111111111111111111111111111111112");function ei(e){return new s.Sl({programId:new s.nh(e.programId),keys:e.accounts.map(e=>({pubkey:new s.nh(e.pubkey),isSigner:e.isSigner,isWritable:e.isWritable})),data:p.Buffer.from(e.data,"base64")})}async function er(e,t){return(await t.getMultipleAccountsInfo(e.map(e=>new s.nh(e)))).reduce((t,n,a)=>{let i=e[a];if(n){let e=new s.gw({key:new s.nh(i),state:s.gw.deserialize(n.data)});t.push(e)}return t},[])}function es(e,t){let n=ei(e.swapInstruction);return{swapInstruction:n,cleanupInstruction:e.cleanupInstruction?ei(e.cleanupInstruction):null,computeBudgetInstructions:e.computeBudgetInstructions?e.computeBudgetInstructions.map(ei):[],setupInstructions:e.setupInstructions?e.setupInstructions.map(ei):[],addressLookupTableAddresses:e.addressLookupTableAddresses}}function ep(e){let t=`global:${e}`;return p.Buffer.from(m.sha256.digest(t)).subarray(0,8)}async function eu(){let e;try{let t=await W();e=new s.nh(t)}catch(t){console.log("Relayer not found, using system program"),e=s.yc.programId}return e}async function eo(e,t,n=!1){try{let n=[];for(let t of e)n.push(t.serialize());let a={jsonrpc:"2.0",id:1,method:"sendBundle",params:[n.map(e=>c.Z.encode(e))]},i=await fetch(t.jitoSendUrl||"https://mainnet.block-engine.jito.wtf/api/v1/bundles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(200===i.status||201===i.status)return(await i.json()).result;throw Error("Send Jito bundle failed")}catch(e){if(console.error("Send Jito bundle failed",e),n)throw e}}async function ey(e,t){let n=0;for(;n<5;)try{let n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"getBundleStatuses",params:[e]})});if(!n.ok)throw Error(`HTTP error! Status: ${n.status}`);let a=await n.json();if(a.error)throw Error(`Error getting bundle statuses: ${JSON.stringify(a.error,null,2)}`);return a.result}catch(e){if(n++,await F(400),n>=5)throw Error(`Failed to fetch bundle statuses after 5 attempts: ${e.message}`)}}async function el(e,t,n,a,i){let r=Date.now();for(;Date.now()-r<9e4&&await i.getBlockHeight()<=n;){await F(350);let n=await ey([e],t.jitoSendUrl||"https://mainnet.block-engine.jito.wtf/api/v1/bundles");if(n&&n.value&&n.value.length>0&&n.value[0]){console.log("===>",n.value[0]);let e=n.value[0].confirmation_status;if("confirmed"===e||"finalized"===e){let e=await i.getSignatureStatus(a);if(!e||!e.value)continue;if(e.value?.err)throw Error(`Bundle failed with error: ${e.value.err}`);return}}}throw Error("Bundle not confirmed, timeout")}async function ed(e){try{await fetch("https://explorer-api.mayan.finance/v3/submit/jito-bundle",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bundleId:e})})}catch{}}function em(e,t,n){!function(e){e.forEach(e=>{if(!e.programId.equals(s.Lb.programId))throw Error("Invalid compute budget instruction:: programId");if(3===Uint8Array.from(e.data)[0]&&e.data.readBigUInt64LE(1)>100000000n)throw Error("Invalid compute budget instruction:: to high tx fee")})}(e.computeBudgetInstructions),function(e,t){if(!(e.length<1)){if(e.length>6)throw Error("Invalid setup instruction:: too many instructions");e.forEach(e=>{if(!e.programId.equals(new s.nh(b.ASSOCIATED_TOKEN_PROGRAM_ID))&&!e.programId.equals(s.yc.programId)&&!e.programId.equals(new s.nh(b.TOKEN_PROGRAM_ID))&&!e.programId.equals(new s.nh(b.TOKEN_2022_PROGRAM_ID)))throw Error("Invalid setup instruction:: programId");if(e.programId.equals(new s.nh(b.ASSOCIATED_TOKEN_PROGRAM_ID))){if(1===Uint8Array.from(e.data).length){if(1!==Uint8Array.from(e.data)[0])throw Error("Invalid setup instruction:: data")}else if(0!==Uint8Array.from(e.data).length)throw Error("Invalid setup instruction:: data")}else if(e.programId.equals(s.yc.programId)){if(!t)throw Error("Invalid setup instruction:: unknown transfer");let n=w(ea,t,!0);if(2!==e.data.readUint32LE())throw Error("Invalid setup instruction:: invalid system program instruction");if(!e.keys[1].pubkey.equals(n))throw Error("Invalid setup instruction:: invalid wrap transfer dest")}else if("EQ=="!==e.data.toString("base64"))throw Error("Invalid setup instruction:: invalid token program instruction")})}}(e.setupInstructions,n),function(e,t){if(!e.programId.equals(new s.nh("JUP6LkbZbjS1jKKwapdHNy74zcZ3tLUZoi5QNyVTaV4")))throw Error("Invalid swap instruction:: programId");if(e.data.subarray(0,8).toString("hex")===ep("shared_accounts_route").toString("hex")){if(!e.keys[6].pubkey.equals(t))throw Error("Invalid swap instruction shared_accounts_route:: dest account")}else if(e.data.subarray(0,8).toString("hex")===ep("route").toString("hex")){if(!e.keys[4].pubkey.equals(t))throw Error("Invalid swap instruction route:: dest account")}else throw Error("Invalid swap instruction:: ix id")}(e.swapInstruction,t),function(e){if(e){if(!e.programId.equals(new s.nh(b.TOKEN_PROGRAM_ID))&&!e.programId.equals(new s.nh(b.TOKEN_2022_PROGRAM_ID)))throw Error("Invalid cleanup instruction:: programId");if(1!==Uint8Array.from(e.data).length||9!==Uint8Array.from(e.data)[0])throw Error("Invalid cleanup instruction:: data")}}(e.cleanupInstruction)}function ec(e,t,n,a,i,r=new s.nh("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA")){return new s.Sl({keys:[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1}],programId:new s.nh("B96dV3Luxzo6SokJx3xt8i5y8Mb7HRR6Eec8hCjJDT69"),data:ep("transfer_all_and_close")})}var ef=(0,d.n_)([(0,d.Ik)(8,"instruction")]);function eb(e,t,n,a,i){let r;let u=new s.nh(b.WORMHOLE_PROGRAM_ID),o=new s.nh(b.TOKEN_PROGRAM_ID),y=new s.nh(b.CCTP_CORE_PROGRAM_ID),l=new s.nh(b.CCTP_TOKEN_PROGRAM_ID),d=new s.nh(b.MCTP_PROGRAM_ID),m=new s.nh(a),c=new s.nh(n),f=w(c,e,!0);r=i&&i>BigInt(0)?w(c,m,!1):new s.nh(b.MCTP_PROGRAM_ID);let T=q(c,t),h=function(e){let t=new s.nh(b.WORMHOLE_PROGRAM_ID),n=new s.nh(e),[a]=s.nh.findProgramAddressSync([p.Buffer.from("Bridge")],t),[i]=s.nh.findProgramAddressSync([p.Buffer.from("emitter")],n),[r]=s.nh.findProgramAddressSync([p.Buffer.from("Sequence"),i.toBuffer()],t),[u]=s.nh.findProgramAddressSync([p.Buffer.from("fee_collector")],t);return{bridgeConfig:a,sequenceKey:r,feeCollector:u,emitter:i}}(b.MCTP_PROGRAM_ID),g=s.RG.generate(),I=s.RG.generate(),A=[{pubkey:e,isWritable:!0,isSigner:!1},{pubkey:f,isWritable:!0,isSigner:!1},{pubkey:m,isWritable:!0,isSigner:!0},{pubkey:r,isWritable:!0,isSigner:!1},{pubkey:c,isWritable:!0,isSigner:!1},{pubkey:T.senderAuthority,isWritable:!1,isSigner:!1},{pubkey:T.tokenMessenger,isWritable:!1,isSigner:!1},{pubkey:T.remoteTokenMessengerKey,isWritable:!1,isSigner:!1},{pubkey:T.tokenMinter,isWritable:!1,isSigner:!1},{pubkey:T.localToken,isWritable:!0,isSigner:!1},{pubkey:T.eventAuthToken,isWritable:!1,isSigner:!1},{pubkey:T.messageTransmitter,isWritable:!0,isSigner:!1},{pubkey:g.publicKey,isWritable:!0,isSigner:!0},{pubkey:l,isWritable:!1,isSigner:!1},{pubkey:y,isWritable:!1,isSigner:!1},{pubkey:h.emitter,isWritable:!1,isSigner:!1},{pubkey:h.bridgeConfig,isWritable:!0,isSigner:!1},{pubkey:h.sequenceKey,isWritable:!0,isSigner:!1},{pubkey:h.feeCollector,isWritable:!0,isSigner:!1},{pubkey:I.publicKey,isWritable:!0,isSigner:!0},{pubkey:u,isWritable:!1,isSigner:!1},{pubkey:s.Am,isWritable:!1,isSigner:!1},{pubkey:s.ze,isWritable:!1,isSigner:!1},{pubkey:o,isWritable:!1,isSigner:!1},{pubkey:s.yc.programId,isWritable:!1,isSigner:!1}],M=p.Buffer.alloc(ef.span);return ef.encode({instruction:ep("bridge_with_fee")},M),{instruction:new s.Sl({keys:A,data:M,programId:d}),signers:[g,I]}}var eT=(0,d.n_)([(0,d.Ik)(8,"instruction")]);function eh(e,t,n,a,i){let r;let u=[],o=new s.nh(b.TOKEN_PROGRAM_ID),y=new s.nh(b.ASSOCIATED_TOKEN_PROGRAM_ID),l=new s.nh(b.CCTP_CORE_PROGRAM_ID),d=new s.nh(b.CCTP_TOKEN_PROGRAM_ID),m=new s.nh(b.MCTP_PROGRAM_ID),c=new s.nh(a),f=new s.nh(n),T=w(f,e,!0),h=q(f,t),g=s.RG.generate(),[I]=s.nh.findProgramAddressSync([p.Buffer.from("LOCKED_FEE"),f.toBuffer(),g.publicKey.toBytes()],m);r=i&&i>BigInt(0)?w(f,c,!1):new s.nh(b.MCTP_PROGRAM_ID);let A=w(f,I,!0);u.push(Q(c,A,I,f));let M=[{pubkey:e,isWritable:!0,isSigner:!1},{pubkey:T,isWritable:!0,isSigner:!1},{pubkey:c,isWritable:!0,isSigner:!0},{pubkey:r,isWritable:!0,isSigner:!1},{pubkey:I,isWritable:!0,isSigner:!1},{pubkey:A,isWritable:!0,isSigner:!1},{pubkey:f,isWritable:!0,isSigner:!1},{pubkey:h.senderAuthority,isWritable:!1,isSigner:!1},{pubkey:h.tokenMessenger,isWritable:!1,isSigner:!1},{pubkey:h.remoteTokenMessengerKey,isWritable:!1,isSigner:!1},{pubkey:h.tokenMinter,isWritable:!1,isSigner:!1},{pubkey:h.localToken,isWritable:!0,isSigner:!1},{pubkey:h.eventAuthToken,isWritable:!1,isSigner:!1},{pubkey:h.messageTransmitter,isWritable:!0,isSigner:!1},{pubkey:g.publicKey,isWritable:!0,isSigner:!0},{pubkey:d,isWritable:!1,isSigner:!1},{pubkey:l,isWritable:!1,isSigner:!1},{pubkey:o,isWritable:!1,isSigner:!1},{pubkey:y,isWritable:!1,isSigner:!1},{pubkey:s.yc.programId,isWritable:!1,isSigner:!1}],k=p.Buffer.alloc(eT.span);return eT.encode({instruction:ep("bridge_locked_fee")},k),u.push(new s.Sl({keys:M,data:k,programId:m})),{instructions:u,signer:g}}var eg=(0,d.n_)([(0,d.Ik)(8,"instruction")]);function eI(e,t,n,a,i){let r;let u=new s.nh(b.TOKEN_PROGRAM_ID),o=new s.nh(b.CCTP_CORE_PROGRAM_ID),y=new s.nh(b.CCTP_TOKEN_PROGRAM_ID),l=new s.nh(b.MCTP_PROGRAM_ID),d=new s.nh(a),m=new s.nh(n),c=w(m,e,!0),f=q(m,t),T=s.RG.generate(),[h]=s.nh.findProgramAddressSync([p.Buffer.from("ORDER_SOLANA_SOURCE"),e.toBuffer()],l);r=i&&i>BigInt(0)?w(m,d,!1):new s.nh(b.MCTP_PROGRAM_ID);let g=[{pubkey:e,isWritable:!1,isSigner:!1},{pubkey:c,isWritable:!0,isSigner:!1},{pubkey:d,isWritable:!0,isSigner:!0},{pubkey:r,isWritable:!0,isSigner:!1},{pubkey:m,isWritable:!0,isSigner:!1},{pubkey:h,isWritable:!0,isSigner:!1},{pubkey:f.senderAuthority,isWritable:!1,isSigner:!1},{pubkey:f.tokenMessenger,isWritable:!1,isSigner:!1},{pubkey:f.remoteTokenMessengerKey,isWritable:!1,isSigner:!1},{pubkey:f.tokenMinter,isWritable:!1,isSigner:!1},{pubkey:f.localToken,isWritable:!0,isSigner:!1},{pubkey:f.eventAuthToken,isWritable:!1,isSigner:!1},{pubkey:f.messageTransmitter,isWritable:!0,isSigner:!1},{pubkey:T.publicKey,isWritable:!0,isSigner:!0},{pubkey:y,isWritable:!1,isSigner:!1},{pubkey:o,isWritable:!1,isSigner:!1},{pubkey:new s.nh(b.FEE_MANAGER_PROGRAM_ID),isWritable:!1,isSigner:!1},{pubkey:u,isWritable:!1,isSigner:!1},{pubkey:s.yc.programId,isWritable:!1,isSigner:!1}],I=p.Buffer.alloc(eg.span);return eg.encode({instruction:ep("create_order")},I),{instruction:new s.Sl({keys:g,data:I,programId:l}),signer:T}}var ew=(0,d.n_)([(0,d.Ik)(8,"instruction"),(0,d.Ik)(32,"destAddress"),(0,d.Ik)(8,"amountInMin"),(0,d.Ik)(8,"gasDrop"),(0,d.Ik)(8,"feeRedeem"),(0,d.Ik)(8,"feeSolana"),(0,d.KB)("destinationChain"),(0,d.Ik)(32,"keyRnd"),(0,d.u8)("mode")]);function eA(e){if("WITH_FEE"!==e.mode&&"LOCK_FEE"!==e.mode)throw Error("Invalid mode: "+e.mode);let t=new s.nh(e.swapperAddress),n=new s.nh(e.mintAddress),a=w(n,e.ledger,!0),i=M[e.toChain],r=p.Buffer.from(I(g(e.destinationAddress,i))),u=E(e.amountInMin64),o=E(A(e.gasDrop,Math.min(S(e.toChain),8))),y=E(A(e.feeRedeem,6)),l=E(e.feeSolana),d=e.referrerAddress?p.Buffer.from(I(g(e.referrerAddress,i))):s.yc.programId.toBuffer(),m=[{pubkey:t,isWritable:!0,isSigner:!0},{pubkey:e.ledger,isWritable:!0,isSigner:!1},{pubkey:a,isWritable:!1,isSigner:!1},{pubkey:e.customPayload||new s.nh(b.MCTP_PROGRAM_ID),isWritable:!1,isSigner:!1},{pubkey:n,isWritable:!1,isSigner:!1},{pubkey:s.yc.programId,isWritable:!1,isSigner:!1},{pubkey:new s.nh(d),isWritable:!1,isSigner:!1}],c=p.Buffer.alloc(ew.span);return ew.encode({instruction:ep("init_bridge_ledger"),destAddress:r,amountInMin:u,gasDrop:o,feeRedeem:y,feeSolana:l,destinationChain:i,keyRnd:e.randomKey.toBuffer(),mode:"WITH_FEE"===e.mode?1:2},c),new s.Sl({keys:m,data:c,programId:new s.nh(b.MCTP_PROGRAM_ID)})}var eM=(0,d.n_)([(0,d.Ik)(8,"instruction"),(0,d.Ik)(32,"destAddress"),(0,d.Ik)(8,"amountInMin"),(0,d.Ik)(8,"gasDrop"),(0,d.Ik)(8,"feeRedeem"),(0,d.Ik)(8,"feeSolana"),(0,d.KB)("destinationChain"),(0,d.Ik)(32,"keyRnd"),(0,d.u8)("mode"),(0,d.Ik)(32,"tokenOut"),(0,d.Ik)(8,"amountOutMin"),(0,d.Ik)(8,"deadline"),(0,d.Ik)(32,"refAddress"),(0,d.u8)("feeRateRef")]);function ek(e){let t=new s.nh(e.swapperAddress),n=new s.nh(e.mintAddress),a=w(n,e.ledger,!0),i=M[e.toChain],r=p.Buffer.from(I(g(e.destinationAddress,i))),u=E(e.amountInMin64),o=E(A(e.gasDrop,Math.min(S(e.toChain),8))),y=E(A(e.feeRedeem,6)),l=E(e.feeSolana),d=p.Buffer.from(I(g(e.tokenOut,i))),m=e.referrerAddress?p.Buffer.from(I(g(e.referrerAddress,i))):s.yc.programId.toBuffer(),c=E(A(e.amountOutMin,Math.min(8,e.tokenOutDecimals))),f=E(e.deadline),T=[{pubkey:t,isWritable:!0,isSigner:!0},{pubkey:e.ledger,isWritable:!0,isSigner:!1},{pubkey:a,isWritable:!1,isSigner:!1},{pubkey:n,isWritable:!1,isSigner:!1},{pubkey:s.yc.programId,isWritable:!1,isSigner:!1}],h=p.Buffer.alloc(eM.span);return eM.encode({instruction:ep("init_order_ledger"),destAddress:r,amountInMin:u,gasDrop:o,feeRedeem:y,feeSolana:l,destinationChain:i,keyRnd:e.randomKey.toBuffer(),mode:3,tokenOut:d,refAddress:m,amountOutMin:c,deadline:f,feeRateRef:e.feeRateRef},h),new s.Sl({keys:T,data:h,programId:new s.nh(b.MCTP_PROGRAM_ID)})}async function eC(e,t,n,a,i,r={}){let u=r?.forceSkipCctpInstructions||!1,o=r?.allowSwapperOffCurve||!1;if("solana"===e.toChain)throw Error("Unsupported destination chain: "+e.toChain);let y=[],l=[],d=[],m=[],c=[],f=[],T=[],h=s.RG.generate(),g=null;y.push(b.LOOKUP_TABLE);let I=new s.nh(b.MCTP_PROGRAM_ID),M=new s.nh(t),k=s.RG.generate(),C=e.deadline64?BigInt(e.deadline64):BigInt(0);if(e.hasAuction&&!Number(e.deadline64))throw Error("Swap mode requires a timeout");let R=e.hasAuction?"LEDGER_ORDER":"LEDGER_BRIDGE",[S]=s.nh.findProgramAddressSync([p.Buffer.from(R),M.toBytes(),k.publicKey.toBytes()],I),_=w(new s.nh(e.mctpInputContract),S,!0),E="solana"===e.cheaperChain?"LOCK_FEE":"WITH_FEE",O="sui"===e.toChain?e.toToken.verifiedAddress:e.toToken.contract;if(e.fromToken.contract===e.mctpInputContract){let i=u?BigInt(e.solanaRelayerFee64):BigInt(0);if(e.suggestedPriorityFee>0&&l.push(s.Lb.setComputeUnitPrice({microLamports:e.suggestedPriorityFee})),l.push(Q(M,_,S,new s.nh(e.mctpInputContract))),l.push(en(w(new s.nh(e.mctpInputContract),M,o),_,M,BigInt(e.effectiveAmountIn64))),e.hasAuction){if(l.push(ek({ledger:S,swapperAddress:t,mintAddress:e.mctpInputContract,randomKey:k.publicKey,toChain:e.toChain,destinationAddress:n,feeSolana:i,feeRedeem:e.redeemRelayerFee,gasDrop:e.gasDrop,amountInMin64:BigInt(e.effectiveAmountIn64),tokenOut:O,tokenOutDecimals:e.toToken.decimals,referrerAddress:a,amountOutMin:e.minAmountOut,deadline:C,feeRateRef:e.referrerBps})),!u){let{instruction:n,signer:a}=eI(S,e.toChain,e.mctpInputContract,t,i);l.push(n),d.push(a)}}else if(l.push(eA({ledger:S,swapperAddress:t,mintAddress:e.mctpInputContract,randomKey:k.publicKey,toChain:e.toChain,destinationAddress:n,feeSolana:i,feeRedeem:e.redeemRelayerFee,gasDrop:e.gasDrop,amountInMin64:BigInt(e.effectiveAmountIn64),mode:E,referrerAddress:a})),!u){if("WITH_FEE"===E){let{instruction:n,signers:a}=eb(S,e.toChain,e.mctpInputContract,t,i);l.push(n),d.push(...a)}else{let{instructions:n,signer:a}=eh(S,e.toChain,e.mctpInputContract,t,i);l.push(...n),d.push(a)}}}else{let p=await N({minMiddleAmount:e.minMiddleAmount,middleToken:e.mctpInputContract,userWallet:t,userLedger:S.toString(),slippageBps:e.slippageBps,fromToken:e.fromToken.contract,amountIn64:e.effectiveAmountIn64,depositMode:e.hasAuction?"SWAP":E,fillMaxAccounts:r?.separateSwapTx||!1,tpmTokenAccount:r?.separateSwapTx?h.publicKey.toString():null}),u=es(p,i);r?.separateSwapTx&&p.maxAccountsFilled?(em(u,h.publicKey,M),T=await J(i,M,new s.nh(e.mctpInputContract),M,h),f.push(...u.computeBudgetInstructions),u.setupInstructions&&f.push(...u.setupInstructions),f.push(u.swapInstruction),u.cleanupInstruction&&f.push(u.cleanupInstruction),c.push(...u.addressLookupTableAddresses),l.push(Q(M,_,S,new s.nh(e.mctpInputContract))),l.push(ec(M,new s.nh(e.mctpInputContract),h.publicKey,_,M))):(em(u,_,M),l.push(...u.computeBudgetInstructions),u.setupInstructions&&l.push(...u.setupInstructions),l.push(u.swapInstruction),u.cleanupInstruction&&l.push(u.cleanupInstruction),y.push(...u.addressLookupTableAddresses));let o=f.length>0?BigInt(0):BigInt(e.solanaRelayerFee64);if(e.hasAuction){if(l.push(ek({ledger:S,swapperAddress:t,mintAddress:e.mctpInputContract,randomKey:k.publicKey,toChain:e.toChain,destinationAddress:n,feeSolana:o,feeRedeem:e.redeemRelayerFee,gasDrop:e.gasDrop,amountInMin64:A(e.minMiddleAmount,6),tokenOut:O,tokenOutDecimals:e.toToken.decimals,referrerAddress:a,amountOutMin:e.minAmountOut,deadline:C,feeRateRef:e.referrerBps})),f.length>0){let{instruction:n,signer:a}=eI(S,e.toChain,e.mctpInputContract,t,o);l.push(n),d.push(a)}}else if(l.push(eA({ledger:S,swapperAddress:t,mintAddress:e.mctpInputContract,randomKey:k.publicKey,toChain:e.toChain,destinationAddress:n,feeSolana:o,feeRedeem:e.redeemRelayerFee,gasDrop:e.gasDrop,amountInMin64:A(e.minMiddleAmount,6),mode:E,referrerAddress:a})),f.length>0){if("WITH_FEE"===E){let{instruction:n,signers:a}=eb(S,e.toChain,e.mctpInputContract,t,o);l.push(n),d.push(...a)}else{let{instructions:n,signer:a}=eh(S,e.toChain,e.mctpInputContract,t,o);l.push(...n),d.push(a)}}}let F=await er(y.concat(c),i);return m=F.slice(0,y.length),f.length>0&&(g={messageV0:{payerKey:M,instructions:f,addressLookupTableAccounts:F.slice(y.length)},createTmpTokenAccountIxs:T,tmpTokenAccount:h}),{instructions:l,signers:d,lookupTables:m,swapMessageV0Params:g}}var eR=(0,d.n_)([(0,d.Ik)(8,"instruction"),(0,d.Ik)(8,"amountInMin"),(0,d.u8)("nativeInput"),(0,d.Ik)(8,"feeSubmit"),(0,d.Ik)(32,"destAddress"),(0,d.KB)("destinationChain"),(0,d.Ik)(32,"tokenOut"),(0,d.Ik)(8,"amountOutMin"),(0,d.Ik)(8,"gasDrop"),(0,d.Ik)(8,"feeCancel"),(0,d.Ik)(8,"feeRefund"),(0,d.Ik)(8,"deadline"),(0,d.Ik)(32,"refAddress"),(0,d.u8)("feeRateRef"),(0,d.u8)("feeRateMayan"),(0,d.u8)("auctionMode"),(0,d.Ik)(32,"randomKey")]);async function eS(e,t,n,a,i,r={}){if("SWIFT"!==e.type)throw Error("Unsupported quote type for Swift: "+e.type);if("solana"===e.toChain)throw Error("Unsupported destination chain: "+e.toChain);let u=r.allowSwapperOffCurve||!1,y=[],l=[],d=[];d.push(b.LOOKUP_TABLE);let m=[],c=[],T=[],h=s.RG.generate(),k=null,C=new s.nh(b.SWIFT_PROGRAM_ID),R=new s.nh(t),_=s.RG.generate();if(!Number(e.deadline64))throw Error("Swift mode requires a timeout");let O=BigInt(e.deadline64),F=function(e,t,n,a,i){let r=p.Buffer.alloc(239),u=0,y=M[e.fromChain],l=p.Buffer.from(I(g(t,y)));r.set(l,0),u+=32,r.writeUInt16BE(y,u),u+=2;let d=e.swiftInputContract===o.N?g(s.yc.programId.toString(),M.solana):g(e.swiftInputContract,y),m=p.Buffer.from(I(d));r.set(m,u),u+=32;let c=M[e.toChain],b=p.Buffer.from(I(g(n,c)));r.set(b,u),u+=32,r.writeUInt16BE(c,u),u+=2;let T=e.toToken.contract===o.N?g(s.yc.programId.toString(),M.solana):g(e.toToken.contract,c),h=p.Buffer.from(I(T));r.set(h,u),u+=32,r.writeBigUInt64BE(A(e.minAmountOut,Math.min(e.toToken.decimals,8)),u),u+=8,r.writeBigUInt64BE(A(e.gasDrop,Math.min(S(e.toChain),8)),u),u+=8,r.writeBigUInt64BE(BigInt(e.cancelRelayerFee64),u),u+=8,r.writeBigUInt64BE(BigInt(e.refundRelayerFee64),u),u+=8,r.writeBigUInt64BE(BigInt(e.deadline64),u),u+=8;let w=a?p.Buffer.from(I(g(a,c))):s.yc.programId.toBuffer();r.set(w,u),u+=32,r.writeUInt8(e.referrerBps,u),u+=1;let k=e.protocolBps;r.writeUInt8(k,u),u+=1,r.writeUInt8(e.swiftAuctionMode,u),u+=1;let C=p.Buffer.from(I(i));if(r.set(C,u),239!==(u+=32))throw Error(`Invalid order data size: ${u}`);let R=f.w(r);return p.Buffer.from(I(R))}(e,t,n,a,_.publicKey.toBuffer().toString("hex")),[D]=s.nh.findProgramAddressSync([p.Buffer.from("STATE_SOURCE"),F],C),P=e.swiftInputContract===o.N?ea:new s.nh(e.swiftInputContract),v=w(P,D,!0),B=e.gasless?new s.nh(e.relayer):R,W=w(P,B,!1);if(e.fromToken.contract===e.swiftInputContract)e.suggestedPriorityFee>0&&y.push(s.Lb.setComputeUnitPrice({microLamports:e.suggestedPriorityFee})),y.push(Q(B,v,D,P)),e.swiftInputContract===o.N?y.push(s.yc.transfer({fromPubkey:R,toPubkey:v,lamports:BigInt(e.effectiveAmountIn64)}),ee(v)):y.push(en(w(P,R,u),v,R,BigInt(e.effectiveAmountIn64)));else{let n=await N({minMiddleAmount:e.minMiddleAmount,middleToken:e.swiftInputContract,userWallet:t,slippageBps:e.slippageBps,fromToken:e.fromToken.contract,amountIn64:e.effectiveAmountIn64,depositMode:e.gasless?"SWIFT_GASLESS":"SWIFT",orderHash:`0x${F.toString("hex")}`,fillMaxAccounts:r?.separateSwapTx||!1,tpmTokenAccount:r?.separateSwapTx?h.publicKey.toString():null}),a=es(n,i);r?.separateSwapTx&&n.maxAccountsFilled?(em(a,h.publicKey,R),T=await J(i,B,P,R,h),c.push(...a.computeBudgetInstructions),a.setupInstructions&&c.push(...a.setupInstructions),c.push(a.swapInstruction),a.cleanupInstruction&&c.push(a.cleanupInstruction),m.push(...a.addressLookupTableAddresses),y.push(Q(B,v,D,P)),y.push(ec(R,P,h.publicKey,v,B))):(y.push(...a.computeBudgetInstructions),a.setupInstructions&&y.push(...a.setupInstructions),y.push(a.swapInstruction),a.cleanupInstruction&&y.push(a.cleanupInstruction),d.push(...a.addressLookupTableAddresses))}y.push(function(e){let{quote:t}=e,n=t.swiftInputContract===o.N?ea:new s.nh(t.swiftInputContract),a=M[t.toChain];if(a!==t.toToken.wChainId)throw Error(`Destination chain ID mismatch: ${a} != ${t.toToken.wChainId}`);let i=[{pubkey:e.trader,isWritable:!1,isSigner:!0},{pubkey:e.relayer,isWritable:!0,isSigner:!0},{pubkey:e.state,isWritable:!0,isSigner:!1},{pubkey:e.stateAccount,isWritable:!0,isSigner:!1},{pubkey:e.relayerAccount,isWritable:!0,isSigner:!1},{pubkey:n,isWritable:!1,isSigner:!1},{pubkey:new s.nh(b.FEE_MANAGER_PROGRAM_ID),isWritable:!1,isSigner:!1},{pubkey:new s.nh(b.TOKEN_PROGRAM_ID),isWritable:!1,isSigner:!1},{pubkey:s.yc.programId,isWritable:!1,isSigner:!1}],r=p.Buffer.alloc(eR.span),u=e.referrerAddress?p.Buffer.from(I(g(e.referrerAddress,a))):s.yc.programId.toBuffer(),y=t.fromToken.contract===t.swiftInputContract?BigInt(t.effectiveAmountIn64):A(t.minMiddleAmount,t.swiftInputDecimals);return eR.encode({instruction:ep("init_order"),amountInMin:E(y),nativeInput:t.swiftInputContract===o.N?1:0,feeSubmit:E(BigInt(t.submitRelayerFee64)),destAddress:p.Buffer.from(I(g(e.destinationAddress,a))),destinationChain:a,tokenOut:p.Buffer.from(I(g(t.toToken.contract,a))),amountOutMin:E(A(t.minAmountOut,Math.min(t.toToken.decimals,8))),gasDrop:E(A(t.gasDrop,Math.min(S(t.toChain),8))),feeCancel:E(BigInt(t.cancelRelayerFee64)),feeRefund:E(BigInt(t.refundRelayerFee64)),deadline:E(e.deadline),refAddress:u,feeRateRef:t.referrerBps,feeRateMayan:t.protocolBps,auctionMode:t.swiftAuctionMode,randomKey:e.randomKey.toBuffer()},r),new s.Sl({keys:i,data:r,programId:new s.nh(b.SWIFT_PROGRAM_ID)})}({quote:e,state:D,trader:R,stateAccount:v,randomKey:_.publicKey,relayerAccount:W,relayer:B,destinationAddress:n,deadline:O,referrerAddress:a}));let x=await er(d.concat(m),i);return l=x.slice(0,d.length),c.length>0&&(k={messageV0:{payerKey:B,instructions:c,addressLookupTableAccounts:x.slice(d.length)},createTmpTokenAccountIxs:T,tmpTokenAccount:h}),{instructions:y,signers:[],lookupTables:l,swapMessageV0Params:k}}var e_=(0,d.n_)([(0,d.u8)("instruction"),(0,d.u8)("stateNonce"),(0,d.Ik)(8,"amount"),(0,d.Ik)(8,"minAmountOut"),(0,d.Ik)(8,"deadline"),(0,d.Ik)(8,"feeSwap"),(0,d.Ik)(8,"feeReturn"),(0,d.Ik)(8,"feeCancel"),(0,d.Ik)(8,"gasDrop"),(0,d.KB)("destinationChain"),(0,d.Ik)(32,"destinationAddress"),(0,d.u8)("unwrapRedeem"),(0,d.u8)("unwrapRefund"),(0,d.u8)("mayanFeeNonce"),(0,d.u8)("referrerFeeNonce")]);async function eE(e,t,n,a,i,r={}){let u;let y=D(e,a);if("MCTP"===e.type)return eC(e,t,n,y,i,r);if("SWIFT"===e.type)return eS(e,t,n,y,i,r);let l=[],d=i??new s.ew("https://rpc.ankr.com/solana"),m=new s.nh(b.MAYAN_PROGRAM_ID),c=new s.nh(b.TOKEN_PROGRAM_ID),f=new s.nh(t),T=new s.nh(b.AUCTION_PROGRAM_ID);e.suggestedPriorityFee>0&&l.push(s.Lb.setComputeUnitPrice({microLamports:e.suggestedPriorityFee})),u=y?new s.nh(y):s.yc.programId;let[h,k]=s.nh.findProgramAddressSync([p.Buffer.from("MAYANFEE")],m),[C,R]=s.nh.findProgramAddressSync([p.Buffer.from("REFERRERFEE"),u.toBuffer()],m),S=s.RG.generate(),_=s.RG.generate(),[O,F]=s.nh.findProgramAddressSync([p.Buffer.from("V2STATE"),p.Buffer.from(S.publicKey.toBytes()),p.Buffer.from(_.publicKey.toBytes())],m),P=new s.nh(e.fromToken.mint),v=new s.nh(e.toToken.mint),B=w(P,f),W=w(P,O,!0),[[N,x],G,U]=await Promise.all([d.getMultipleAccountsInfo([B,W],"finalized"),d.getMinimumBalanceForRentExemption(420),eu()]);N&&0!==N.data.length||l.push(Q(f,B,f,P)),x&&0!==x.data.length||l.push(Q(f,W,O,P)),e.fromToken.contract===o.N&&(l.push(s.yc.transfer({fromPubkey:f,toPubkey:B,lamports:BigInt(e.effectiveAmountIn64)})),l.push(ee(B)));let K=BigInt(e.effectiveAmountIn64),L=s.RG.generate();l.push(function(e,t,n,a,i=new s.nh(b.TOKEN_PROGRAM_ID)){let r=p.Buffer.alloc(X.span);return X.encode({instruction:4,amount:E(a)},r),new s.Sl({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:i,data:r})}(B,L.publicKey,f,K)),l.push(s.yc.transfer({fromPubkey:f,toPubkey:L.publicKey,lamports:G}));let q=[{pubkey:L.publicKey,isWritable:!1,isSigner:!0},{pubkey:S.publicKey,isWritable:!1,isSigner:!0},{pubkey:_.publicKey,isWritable:!1,isSigner:!0},{pubkey:O,isWritable:!0,isSigner:!1},{pubkey:B,isWritable:!0,isSigner:!1},{pubkey:f,isWritable:!1,isSigner:!1},{pubkey:W,isWritable:!0,isSigner:!1},{pubkey:P,isWritable:!1,isSigner:!1},{pubkey:v,isWritable:!1,isSigner:!1},{pubkey:T,isWritable:!1,isSigner:!1},{pubkey:u,isWritable:!1,isSigner:!1},{pubkey:h,isWritable:!1,isSigner:!1},{pubkey:C,isWritable:!1,isSigner:!1},{pubkey:L.publicKey,isWritable:!0,isSigner:!0},{pubkey:U,isWritable:!1,isSigner:!1},{pubkey:s.Am,isWritable:!1,isSigner:!1},{pubkey:s.ze,isWritable:!1,isSigner:!1},{pubkey:c,isWritable:!1,isSigner:!1},{pubkey:s.yc.programId,isWritable:!1,isSigner:!1}],H=M[e.toChain];if(1===H){let e=await d.getAccountInfo(new s.nh(n));if(e&&e.owner&&e.owner.equals(c))throw Error("Destination address is not about token account. It should be a owner address")}let $=p.Buffer.from(I(g(n,H))),Y=A(e.minAmountOut,e.mintDecimals.to),V=A(e.swapRelayerFee,e.mintDecimals.from),z=A(e.redeemRelayerFee,e.mintDecimals.to),j=A(e.refundRelayerFee,e.mintDecimals.from),J=A(e.gasDrop,"solana"===e.toChain?9:8),Z=e.toToken.contract===o.N,et=e.fromToken.contract===o.N;if(!Number(e.deadline64))throw Error("Deadline is not valid");let en=BigInt(e.deadline64),ea=p.Buffer.alloc(e_.span),ei={instruction:101,stateNonce:F,amount:E(K),minAmountOut:E(Y),deadline:E(en),feeSwap:E(V),feeReturn:E(z),feeCancel:E(j),gasDrop:E(J),destinationChain:H,destinationAddress:$,unwrapRedeem:Z?1:0,unwrapRefund:et?1:0,mayanFeeNonce:k,referrerFeeNonce:R};return e_.encode(ei,ea),l.push(new s.Sl({keys:q,data:ea,programId:m})),{instructions:l,signers:[L,S,_],lookupTables:[],swapMessageV0Params:null}}async function eO(e,t,n,a,i,r,u,o,y,l){let d;let m=r??new s.ew("https://rpc.ankr.com/solana"),f=!!(!e.gasless&&y&&y.tipLamports>0&&y.signAllTransactions),{instructions:b,signers:T,lookupTables:h,swapMessageV0Params:g}=await eE(e,t,n,a,r,{allowSwapperOffCurve:l?.allowSwapperOffCurve,forceSkipCctpInstructions:l?.forceSkipCctpInstructions,separateSwapTx:f&&y?.separateSwapTx}),I=new s.nh(t),w=e.gasless?new s.nh(e.relayer):I,{blockhash:A,lastValidBlockHeight:M}=await r.getLatestBlockhash(),k=s.RL.compile({instructions:b,payerKey:w,recentBlockhash:A,addressLookupTableAccounts:h}),C=new s.GS(k);if(C.sign(T),f){let e=[];if(g){let t=new s.YW({feePayer:I,blockhash:A,lastValidBlockHeight:M}).add(...g.createTmpTokenAccountIxs);t.partialSign(g.tmpTokenAccount),e.push(t);let n=s.RL.compile({...g.messageV0,recentBlockhash:A});e.push(new s.GS(n))}let n=function(e,t,n,a){let i=a.jitoAccount||"Cw8CFyM9FkoMi7K7Crf6HNQqf4uEMzpKw6QNghXLvLkY";return new s.YW({feePayer:new s.nh(e),blockhash:t,lastValidBlockHeight:n}).add(s.yc.transfer({fromPubkey:new s.nh(e),toPubkey:new s.nh(i),lamports:a.tipLamports}))}(t,A,M,y);e.push(C),e.push(n);let a=await y.signAllTransactions(e);d=a[a.length-2];let i=null;if(d instanceof s.YW&&d?.signatures[0]?.publicKey?i=c.Z.encode(Uint8Array.from(d.signatures[0].signature)):d instanceof s.GS&&d?.signatures[0]&&(i=c.Z.encode(Uint8Array.from(d.signatures[0]))),null===i)throw Error("Failed to get mayan tx hash");if(g){let e=await eo(a,y,!0);return await el(e,y,M,i,r),ed(e),{signature:i,serializedTrx:null}}eo(a,y).then(()=>{console.log("Jito bundle sent")}).catch(()=>{})}else d=await i(C);if(e.gasless){let e=p.Buffer.from(d.serialize()).toString("base64"),{orderHash:t}=await x(e);return{signature:t,serializedTrx:null}}return await j({trx:d.serialize(),connection:m,extraRpcs:u??[],errorChance:2,options:o})}var eF=[{type:"function",name:"batchMaxApprove",inputs:[{name:"approvals",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"initiate",inputs:[{name:"recipient",type:"bytes32",internalType:"bytes32"},{name:"overrideAmountIn",type:"uint256",internalType:"uint256"},{name:"targetChain",type:"uint16",internalType:"uint16"},{name:"params",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes",internalType:"bytes"}],stateMutability:"payable"},{type:"error",name:"ChainNotSupported",inputs:[{name:"chain",type:"uint16",internalType:"uint16"}]},{type:"error",name:"DeadlineExpired",inputs:[{name:"blocktime",type:"uint256",internalType:"uint256"},{name:"deadline",type:"uint256",internalType:"uint256"}]},{type:"error",name:"EthTransferFailed",inputs:[]},{type:"error",name:"ExceedsMaxGasDropoff",inputs:[{name:"requested",type:"uint256",internalType:"uint256"},{name:"maximum",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ExceedsMaxRelayingFee",inputs:[{name:"fee",type:"uint256",internalType:"uint256"},{name:"maximum",type:"uint256",internalType:"uint256"}]},{type:"error",name:"InsufficientInputAmount",inputs:[{name:"input",type:"uint256",internalType:"uint256"},{name:"minimum",type:"uint256",internalType:"uint256"}]},{type:"error",name:"InvalidAddress",inputs:[{name:"addr",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"InvalidBoolVal",inputs:[{name:"val",type:"uint8",internalType:"uint8"}]},{type:"error",name:"InvalidOverrideAmount",inputs:[{name:"received",type:"uint256",internalType:"uint256"},{name:"maximum",type:"uint256",internalType:"uint256"}]},{type:"error",name:"InvalidSwapType",inputs:[{name:"swapType",type:"uint256",internalType:"uint256"}]},{type:"error",name:"InvalidSwapTypeForChain",inputs:[{name:"chain",type:"uint16",internalType:"uint16"},{name:"swapType",type:"uint256",internalType:"uint256"}]},{type:"error",name:"LengthMismatch",inputs:[{name:"encodedLength",type:"uint256",internalType:"uint256"},{name:"expectedLength",type:"uint256",internalType:"uint256"}]},{type:"error",name:"RelayingDisabledForChain",inputs:[]}],eD={FAST_MODE_FLAG:1,RELAY_REDEEM_MODE:2,EXACT_IN_FLAG:1,USDC_INPUT_TOKEN_TYPE:0,PRE_APPROVED_ACQUIRE_MODE:0,OUTPUT_USDC_MODE:0,OUTPUT_NATIVE_MODE:1,OUTPUT_OTHER_MODE:2},eP=[{type:"constructor",inputs:[{name:"_cctpTokenMessengerV2",type:"address",internalType:"address"},{name:"_feeManager",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"receive",stateMutability:"payable"},{type:"function",name:"bridge",inputs:[{name:"tokenIn",type:"address",internalType:"address"},{name:"amountIn",type:"uint256",internalType:"uint256"},{name:"redeemFee",type:"uint64",internalType:"uint64"},{name:"circleMaxFee",type:"uint256",internalType:"uint256"},{name:"gasDrop",type:"uint64",internalType:"uint64"},{name:"destAddr",type:"bytes32",internalType:"bytes32"},{name:"destDomain",type:"uint32",internalType:"uint32"},{name:"referrerAddress",type:"bytes32",internalType:"bytes32"},{name:"referrerBps",type:"uint8",internalType:"uint8"},{name:"payloadType",type:"uint8",internalType:"uint8"},{name:"minFinalityThreshold",type:"uint32",internalType:"uint32"},{name:"customPayload",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"cctpTokenMessengerV2",inputs:[],outputs:[{name:"",type:"address",internalType:"contract ITokenMessengerV2"}],stateMutability:"view"},{type:"function",name:"changeGuardian",inputs:[{name:"newGuardian",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"claimGuardian",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"createOrder",inputs:[{name:"tokenIn",type:"address",internalType:"address"},{name:"amountIn",type:"uint256",internalType:"uint256"},{name:"circleMaxFee",type:"uint256",internalType:"uint256"},{name:"destDomain",type:"uint32",internalType:"uint32"},{name:"minFinalityThreshold",type:"uint32",internalType:"uint32"},{name:"orderPayload",type:"tuple",internalType:"struct FastMCTP.OrderPayload",components:[{name:"payloadType",type:"uint8",internalType:"uint8"},{name:"destAddr",type:"bytes32",internalType:"bytes32"},{name:"tokenOut",type:"bytes32",internalType:"bytes32"},{name:"amountOutMin",type:"uint64",internalType:"uint64"},{name:"gasDrop",type:"uint64",internalType:"uint64"},{name:"redeemFee",type:"uint64",internalType:"uint64"},{name:"refundFee",type:"uint64",internalType:"uint64"},{name:"deadline",type:"uint64",internalType:"uint64"},{name:"referrerAddr",type:"bytes32",internalType:"bytes32"},{name:"referrerBps",type:"uint8",internalType:"uint8"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"domainToCaller",inputs:[{name:"",type:"uint32",internalType:"uint32"}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"feeManager",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"fulfillOrder",inputs:[{name:"cctpMsg",type:"bytes",internalType:"bytes"},{name:"cctpSigs",type:"bytes",internalType:"bytes"},{name:"swapProtocol",type:"address",internalType:"address"},{name:"swapData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"guardian",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"keyToMintRecipient",inputs:[{name:"",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"nextGuardian",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"paused",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"redeem",inputs:[{name:"cctpMsg",type:"bytes",internalType:"bytes"},{name:"cctpSigs",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"refund",inputs:[{name:"cctpMsg",type:"bytes",internalType:"bytes"},{name:"cctpSigs",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"rescueEth",inputs:[{name:"amount",type:"uint256",internalType:"uint256"},{name:"to",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"rescueRedeem",inputs:[{name:"cctpMsg",type:"bytes",internalType:"bytes"},{name:"cctpSigs",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"rescueToken",inputs:[{name:"token",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"},{name:"to",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setDomainCallers",inputs:[{name:"domain",type:"uint32",internalType:"uint32"},{name:"caller",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setFeeManager",inputs:[{name:"_feeManager",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setMintRecipient",inputs:[{name:"destDomain",type:"uint32",internalType:"uint32"},{name:"tokenIn",type:"address",internalType:"address"},{name:"mintRecipient",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setPause",inputs:[{name:"_pause",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setWhitelistedMsgSenders",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"isWhitelisted",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setWhitelistedSwapProtocols",inputs:[{name:"protocol",type:"address",internalType:"address"},{name:"isWhitelisted",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"whitelistedMsgSenders",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"whitelistedSwapProtocols",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"event",name:"OrderFulfilled",inputs:[{name:"sourceDomain",type:"uint32",indexed:!1,internalType:"uint32"},{name:"sourceNonce",type:"bytes32",indexed:!1,internalType:"bytes32"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"OrderRefunded",inputs:[{name:"sourceDomain",type:"uint32",indexed:!1,internalType:"uint32"},{name:"sourceNonce",type:"bytes32",indexed:!1,internalType:"bytes32"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"error",name:"AlreadySet",inputs:[]},{type:"error",name:"CallerNotSet",inputs:[]},{type:"error",name:"CctpReceiveFailed",inputs:[]},{type:"error",name:"DeadlineViolation",inputs:[]},{type:"error",name:"EthTransferFailed",inputs:[]},{type:"error",name:"InvalidAddress",inputs:[]},{type:"error",name:"InvalidAmountOut",inputs:[]},{type:"error",name:"InvalidGasDrop",inputs:[]},{type:"error",name:"InvalidMintRecipient",inputs:[]},{type:"error",name:"InvalidPayload",inputs:[]},{type:"error",name:"InvalidPayloadType",inputs:[]},{type:"error",name:"InvalidRedeemFee",inputs:[]},{type:"error",name:"InvalidRefundFee",inputs:[]},{type:"error",name:"MintRecipientNotSet",inputs:[]},{type:"error",name:"Paused",inputs:[]},{type:"error",name:"Unauthorized",inputs:[]},{type:"error",name:"UnauthorizedMsgSender",inputs:[]},{type:"error",name:"UnauthorizedSwapProtocol",inputs:[]}];function ev(e,t,n,a,i){let r;let u=function(e,t,n,a,i){let r;let u=k[Number(a)],o=M[e.fromChain],y=M[e.toChain];if(o!==u)throw Error(`Signer chain id(${Number(a)}) and quote from chain are not same! ${o} !== ${u}`);let l=g(t,y),d=A(e.redeemRelayerFee,6),m=A(e.gasDrop,Math.min(S(e.toChain),8)),c=BigInt(e.circleMaxFee64),f=BigInt(e.effectiveAmountIn64),b=L(e.toChain);if(r=n?g(n,y):g(s.yc.programId.toString(),M.solana),!e.fastMctpMayanContract)throw Error("FastMctp contract address is missing");let T=e.fastMctpMayanContract;return{tokenIn:e.fastMctpInputContract,amountIn:f,redeemFee:d,gasDrop:m,destAddr:l,destDomain:b,referrerAddr:r,referrerBps:e.referrerBps,payloadType:i?2:1,customPayload:i?`0x${p.Buffer.from(i).toString("hex")}`:"0x",minFinalityThreshold:Number(e.fastMctpMinFinality),circleMaxFee:c,contractAddress:T}}(e,t,n,a,i),{contractAddress:o,tokenIn:d,amountIn:m,destAddr:c,redeemFee:f,gasDrop:b,circleMaxFee:T,referrerAddr:h,referrerBps:I,destDomain:w,customPayload:C,minFinalityThreshold:R,payloadType:_}=u;return r=new y.CH(o,eP).interface.encodeFunctionData("bridge",[d,m,f,T,b,c,w,h,I,_,R,C]),{to:o,data:r,value:(0,l.m9)(0),_params:u}}function eB(e,t,n,a){let i=function(e,t,n,a){let i;let r=k[Number(a)],p=M[e.fromChain],u=M[e.toChain];if(p!==r)throw Error(`Signer chain id(${Number(a)}) and quote from chain are not same! ${p} !== ${r}`);if(!e.fastMctpMayanContract)throw Error("MCTP contract address is missing");let y=e.fastMctpMayanContract,l=g(t,u);i=n?g(n,u):g(s.yc.programId.toString(),M.solana);let d=A(e.redeemRelayerFee,6),m=BigInt(e.refundRelayerFee64),c=BigInt(e.circleMaxFee64),f=A(e.gasDrop,Math.min(S(e.toChain),8)),b=L(e.toChain),T=BigInt(e.effectiveAmountIn64),h=A(e.minAmountOut,Math.min(8,e.toToken.decimals)),I=BigInt(e.deadline64),w=e.toToken.contract===o.N?g(s.yc.programId.toString(),M.solana):g("sui"===e.toChain?e.toToken.verifiedAddress:e.toToken.contract,e.toToken.wChainId);return{tokenIn:e.fastMctpInputContract,amountIn:T,circleMaxFee:c,destDomain:b,minFinalityThreshold:Number(e.fastMctpMinFinality),orderPayload:{payloadType:3,destAddr:l,tokenOut:w,amountOutMin:h,gasDrop:f,redeemFee:d,refundFee:m,deadline:I,referrerAddr:i,referrerBps:e.referrerBps||0},contractAddress:y}}(e,t,n,a),{contractAddress:r,orderPayload:p,tokenIn:u,amountIn:d,circleMaxFee:m,destDomain:c,minFinalityThreshold:f}=i,b=new y.CH(r,eP).interface.encodeFunctionData("createOrder",[u,d,m,c,f,p]);return{to:r,data:b,value:(0,l.m9)(0),_params:i}}function eW(e,t,n,a,i,r,u,d){let m,c,f;let T=k[Number(r)],h=M[e.fromChain];if(h!==T)throw Error(`Signer chain id(${Number(r)}) and quote from chain are not same! ${h} !== ${T}`);let I=D(e,a);if("MCTP"===e.type)return function(e,t,n,a,i,r){if("MCTP"!==e.type)throw Error("Quote type is not MCTP");if(!Number.isFinite(Number(a)))throw Error("Invalid signer chain id");a=Number(a);let s=i||O,p=new y.CH(b.MAYAN_FORWARDER_CONTRACT,U),u=A(e.bridgeFee,S(e.fromChain)),d=(0,l.m9)(u);if(e.fromToken.contract===e.mctpInputContract){if(e.hasAuction){if(!Number(e.deadline64))throw Error("MCTP order requires timeout");let i=$(e,t,n,a),r="forwardERC20",u=[e.fromToken.contract,i._params.params.amountIn,s,i._params.contractAddress,i.data];return{data:p.interface.encodeFunctionData(r,u),to:b.MAYAN_FORWARDER_CONTRACT,value:(0,l.m9)(d),chainId:a,_forwarder:{method:r,params:u}}}{let n=H(e,t,a,r),i="forwardERC20",u=[e.fromToken.contract,n._params.amountIn,s,n._params.contractAddress,n.data];return{data:p.interface.encodeFunctionData(i,u),to:b.MAYAN_FORWARDER_CONTRACT,value:(0,l.m9)(d),chainId:a,_forwarder:{method:i,params:u}}}}{let{minMiddleAmount:i,evmSwapRouterAddress:y,evmSwapRouterCalldata:m}=e;if(!i||!y||!m)throw Error("MCTP swap requires middle amount, router address and calldata");if(e.hasAuction){if(!Number(e.deadline64))throw Error("MCTP order requires timeout");let i=$(e,t,n,a),r=A(e.minMiddleAmount,6);if(e.fromToken.contract===o.N){let t=i._params.params.amountIn;if(t<=u)throw Error("Amount in is less than bridge fee");u!==BigInt(0)&&(t-=u),d=(0,l.m9)(i._params.params.amountIn);let n="swapAndForwardEth",s=[t,y,m,e.mctpInputContract,r,i._params.contractAddress,i.data];return{data:p.interface.encodeFunctionData(n,s),to:b.MAYAN_FORWARDER_CONTRACT,value:(0,l.m9)(d),chainId:a,_forwarder:{method:n,params:s}}}{let t="swapAndForwardERC20",n=[e.fromToken.contract,i._params.params.amountIn,s,y,m,e.mctpInputContract,r,i._params.contractAddress,i.data];return{data:p.interface.encodeFunctionData(t,n),to:b.MAYAN_FORWARDER_CONTRACT,value:(0,l.m9)(d),chainId:a,_forwarder:{method:t,params:n}}}}{let n=H(e,t,a,r),i=A(e.minMiddleAmount,6);if(e.fromToken.contract===o.N){let t=n._params.amountIn;if(t<=u)throw Error("Amount in is less than bridge fee");u!==BigInt(0)&&(t-=u),d=(0,l.m9)(n._params.amountIn);let r="swapAndForwardEth",s=[t,y,m,e.mctpInputContract,i,n._params.contractAddress,n.data];return{data:p.interface.encodeFunctionData(r,s),to:b.MAYAN_FORWARDER_CONTRACT,value:(0,l.m9)(d),chainId:a,_forwarder:{method:r,params:s}}}{let t="swapAndForwardERC20",r=[e.fromToken.contract,n._params.amountIn,s,y,m,e.mctpInputContract,i,n._params.contractAddress,n.data];return{data:p.interface.encodeFunctionData(t,r),to:b.MAYAN_FORWARDER_CONTRACT,value:(0,l.m9)(d),chainId:a,_forwarder:{method:t,params:r}}}}}}(e,n,I,r,d,u);if("SWIFT"===e.type)return function(e,t,n,a,i,r){let p,u,d,m;if("SWIFT"!==e.type)throw Error("Quote type is not SWIFT");if(!Number.isFinite(Number(i)))throw Error("Invalid signer chain id");if(!Number(e.deadline64))throw Error("Swift order requires timeout");i=Number(i);let c=r||O,f=new y.CH(b.MAYAN_FORWARDER_CONTRACT,U),{tokenIn:T,amountIn:h,order:I,contractAddress:w}=function(e,t,n,a,i){let r;let p=k[Number(i)],u=M[e.fromChain],y=M[e.toChain];if(u!==p)throw Error(`Signer chain id(${Number(i)}) and quote from chain are not same! ${u} !== ${p}`);if(!e.swiftMayanContract)throw Error("SWIFT contract address is missing");if(e.toToken.wChainId!==y)throw Error(`Destination chain ID mismatch: ${y} != ${e.toToken.wChainId}`);let l=e.swiftMayanContract;if(!Number(e.deadline64))throw Error("Swift order requires timeout");let d=BigInt(e.deadline64),m=e.swiftInputContract,c=BigInt(e.effectiveAmountIn64);r=a?g(a,y):g(s.yc.programId.toString(),1);let f=g(s.RG.generate().publicKey.toString(),1),b=e.toToken.contract===o.N?g(s.yc.programId.toString(),1):g(e.toToken.contract,y),T=A(e.minAmountOut,Math.min(8,e.toToken.decimals)),h=A(e.gasDrop,Math.min(8,S(e.toChain))),I=g(n,y);return{contractAddress:l,tokenIn:m,amountIn:c,order:{trader:g(t,u),tokenOut:b,minAmountOut:T,gasDrop:h,cancelFee:BigInt(e.cancelRelayerFee64),refundFee:BigInt(e.refundRelayerFee64),deadline:d,destAddr:I,destChainId:y,referrerAddr:r,referrerBps:e.referrerBps||0,auctionMode:e.swiftAuctionMode,random:f}}}(e,t,n,a,i),C=new y.CH(w,Y);if(p=e.swiftInputContract===o.N?C.interface.encodeFunctionData("createOrderWithEth",[I]):C.interface.encodeFunctionData("createOrderWithToken",[T,h,I]),e.fromToken.contract===e.swiftInputContract)e.fromToken.contract===o.N?(u="forwardEth",d=[w,p],m=(0,l.m9)(h)):(u="forwardERC20",d=[T,h,c,w,p],m=(0,l.m9)(0));else{let{evmSwapRouterAddress:t,evmSwapRouterCalldata:n}=e;if(!e.minMiddleAmount||!t||!n)throw Error("Swift swap requires middle amount, router address and calldata");let a=e.fromToken.contract,i=A(e.minMiddleAmount,e.swiftInputDecimals);e.fromToken.contract===o.N?(u="swapAndForwardEth",d=[h,t,n,e.swiftInputContract,i,w,p],m=(0,l.m9)(h)):(u="swapAndForwardERC20",d=[a,h,c,t,n,e.swiftInputContract,i,w,p],m=(0,l.m9)(0))}return{data:f.interface.encodeFunctionData(u,d),to:b.MAYAN_FORWARDER_CONTRACT,value:m,chainId:i,_forwarder:{method:u,params:d}}}(e,t,n,I,r,d);if("SHUTTLE"===e.type)return function(e,t,n,a){let i,r,s,u;if("SHUTTLE"!==e.type)throw Error("Quote type is not SHUTTLE");if(!Number.isFinite(Number(n)))throw Error("Invalid signer chain id");n=Number(n);let d=a||O,m=new y.CH(b.MAYAN_FORWARDER_CONTRACT,U),{destAddr:c,destChainId:f,serializedParams:T,contractAddress:h,amountIn:I,bridgeFee:w}=function(e,t,n){let{shuttleParams:a}=e;if(!a)throw Error("Swap layer params are missing in quote response");let i=k[Number(n)],r=M[e.fromChain],s=M[e.toChain];if(r!==i)throw Error(`Signer chain id(${Number(n)}) and quote from chain are not same! ${r} !== ${i}`);let u=[];u.push(eD.FAST_MODE_FLAG);let y=p.Buffer.alloc(8);y.writeBigUInt64BE(BigInt(a.maxLLFee));let l=y.subarray(2);u.push(...l);let d=p.Buffer.alloc(4);d.writeUInt32BE(a.fastTransferDeadline),u.push(...d),u.push(eD.RELAY_REDEEM_MODE);let m=A(e.gasDrop,Math.min(6,S(e.toChain))),c=p.Buffer.alloc(8);c.writeBigUInt64BE(m);let f=c.subarray(4);u.push(...f);let b=p.Buffer.alloc(8);b.writeBigUInt64BE(BigInt(a.maxRelayingFee));let T=b.subarray(2);u.push(...T),u.push(eD.EXACT_IN_FLAG),u.push(eD.USDC_INPUT_TOKEN_TYPE);let h=BigInt(e.effectiveAmountIn64);if(e.fromToken.contract===e.shuttleInputContract){u.push(...Array(8).fill(0));let e=p.Buffer.alloc(8);e.writeBigUInt64BE(h),u.push(...e)}else u.push(...Array(16).fill(0));if(u.push(eD.PRE_APPROVED_ACQUIRE_MODE),a.hasDestSwap){if(e.toToken.contract===o.N)u.push(eD.OUTPUT_NATIVE_MODE);else{u.push(eD.OUTPUT_OTHER_MODE);let t=p.Buffer.from(g(e.toToken.contract,s).slice(2),"hex");u.push(...t)}let t=p.Buffer.alloc(4);t.writeUInt32BE(Number(BigInt(e.deadline64))),u.push(...t);let n=A(e.minAmountOut,e.toToken.decimals);if("solana"===e.toChain){u.push(...Array(8).fill(0));let e=p.Buffer.alloc(8);e.writeBigUInt64BE(n),u.push(...e)}else{let e=function(e){if(e<0n||e>(1n<<128n)-1n)throw RangeError("Value must fit in an unsigned 128-bit integer (0 <= value < 2^128)");let t=p.Buffer.alloc(16);for(let n=15;n>=0;n--)t[n]=Number(255n&e),e>>=8n;return t}(n);u.push(...e)}let i=p.Buffer.from(a.path.slice(2),"hex");u.push(...i)}else u.push(eD.OUTPUT_USDC_MODE);return{destAddr:g(t,s),destChainId:s,serializedParams:`0x${p.Buffer.from(u).toString("hex")}`,contractAddress:e.shuttleContract,amountIn:h,bridgeFee:A(e.bridgeFee,S(e.fromChain))}}(e,t,n);if(i=new y.CH(h,eF).interface.encodeFunctionData("initiate",[c,I,f,T]),e.fromToken.contract===e.shuttleInputContract)r="forwardERC20",s=[e.shuttleInputContract,I,d,h,i],u=(0,l.m9)(w);else{let{evmSwapRouterAddress:t,evmSwapRouterCalldata:n}=e;if(!e.minMiddleAmount||!t||!n)throw Error("Shuttle source chain swap requires middle amount, router address and calldata");let a=e.fromToken.contract,p=A(e.minMiddleAmount,e.shuttleInputDecimals);e.fromToken.contract===o.N?(r="swapAndForwardEth",s=[I,t,n,e.shuttleInputContract,p,h,i],u=(0,l.m9)(I)):(r="swapAndForwardERC20",s=[a,I,d,t,n,e.shuttleInputContract,p,h,i],u=(0,l.m9)(w))}return{data:m.interface.encodeFunctionData(r,s),to:b.MAYAN_FORWARDER_CONTRACT,value:u,chainId:n,_forwarder:{method:r,params:s}}}(e,n,r,d);if("FAST_MCTP"===e.type)return function(e,t,n,a,i,r){if("FAST_MCTP"!==e.type)throw Error("Quote type is not FAST_MCTP");if(!Number.isFinite(Number(a)))throw Error("Invalid signer chain id");a=Number(a);let s=i||O,p=new y.CH(b.MAYAN_FORWARDER_CONTRACT,U);if(e.fromToken.contract===e.fastMctpInputContract){if(e.hasAuction){if(!Number(e.deadline64))throw Error("Fast Mctp order requires timeout");let i=eB(e,t,n,a),r="forwardERC20",u=[e.fromToken.contract,i._params.amountIn,s,i._params.contractAddress,i.data];return{data:p.interface.encodeFunctionData(r,u),to:b.MAYAN_FORWARDER_CONTRACT,value:(0,l.m9)(0),chainId:a,_forwarder:{method:r,params:u}}}{let i=ev(e,t,n,a,r),u="forwardERC20",o=[e.fromToken.contract,i._params.amountIn,s,i._params.contractAddress,i.data];return{data:p.interface.encodeFunctionData(u,o),to:b.MAYAN_FORWARDER_CONTRACT,value:(0,l.m9)(0),chainId:a,_forwarder:{method:u,params:o}}}}{let{minMiddleAmount:i,evmSwapRouterAddress:u,evmSwapRouterCalldata:y}=e;if(!i||!u||!y)throw Error("Fast Mctp swap requires middle amount, router address and calldata");if(e.hasAuction){if(!Number(e.deadline64))throw Error("Fast Mctp order requires timeout");let i=eB(e,t,n,a),r=A(e.minMiddleAmount,6);if(e.fromToken.contract===o.N){let t="swapAndForwardEth",n=[i._params.amountIn,u,y,e.fastMctpInputContract,r,i._params.contractAddress,i.data];return{data:p.interface.encodeFunctionData(t,n),to:b.MAYAN_FORWARDER_CONTRACT,value:(0,l.m9)(i._params.amountIn),chainId:a,_forwarder:{method:t,params:n}}}{let t="swapAndForwardERC20",n=[e.fromToken.contract,i._params.amountIn,s,u,y,e.fastMctpInputContract,r,i._params.contractAddress,i.data];return{data:p.interface.encodeFunctionData(t,n),to:b.MAYAN_FORWARDER_CONTRACT,value:(0,l.m9)(0),chainId:a,_forwarder:{method:t,params:n}}}}{let i=ev(e,t,n,a,r),d=A(e.minMiddleAmount,6);if(e.fromToken.contract===o.N){let t="swapAndForwardEth",n=[i._params.amountIn,u,y,e.fastMctpInputContract,d,i._params.contractAddress,i.data];return{data:p.interface.encodeFunctionData(t,n),to:b.MAYAN_FORWARDER_CONTRACT,value:(0,l.m9)(i._params.amountIn),chainId:a,_forwarder:{method:t,params:n}}}{let t="swapAndForwardERC20",n=[e.fromToken.contract,i._params.amountIn,s,u,y,e.fastMctpInputContract,d,i._params.contractAddress,i.data];return{data:p.interface.encodeFunctionData(t,n),to:b.MAYAN_FORWARDER_CONTRACT,value:(0,l.m9)(0),chainId:a,_forwarder:{method:t,params:n}}}}}}(e,n,I,r,d,u);if("WH"!=e.type)throw Error("Unsupported quote type");if(!Number(e.deadline64))throw Error("WH mode requires a timeout");let{relayerFees:C,recipient:R,tokenOut:_,tokenOutWChainId:E,criteria:F,tokenIn:P,amountIn:v,contractAddress:B,bridgeFee:W}=function(e,t,n,a,i,r){let u;let y=new s.nh(b.MAYAN_PROGRAM_ID),[l]=s.nh.findProgramAddressSync([p.Buffer.from("MAIN")],y),d=w(new s.nh(e.fromToken.mint),l,!0),m=BigInt(e.effectiveAmountIn64),c=g(d.toString(),1),f=g(b.AUCTION_PROGRAM_ID,1);u=n?g(n,1):g(s.yc.programId.toString(),1);let T=k[Number(i)],h=M[e.fromChain],I=M[e.toChain];if(h!==T)throw Error(`Signer chain id(${Number(i)}) and quote from chain are not same! ${h} !== ${T}`);let C=e.whMayanContract,R={mayanAddr:c,mayanChainId:1,destAddr:g(t,I),destChainId:I,auctionAddr:f,referrer:u,refundAddr:g(a,T)},_=e.toToken.contract===o.N,E={transferDeadline:BigInt(e.deadline64),swapDeadline:BigInt(e.deadline64),amountOutMin:A(e.minAmountOut,Math.min(8,e.toToken.decimals)),gasDrop:A(e.gasDrop,Math.min(8,S(e.toChain))),unwrap:_,customPayload:r?`0x${p.Buffer.from(r).toString("hex")}`:"0x"},O={swapFee:A(e.swapRelayerFee,Math.min(8,e.fromToken.decimals)),redeemFee:A(e.redeemRelayerFee,Math.min(8,e.toToken.decimals)),refundFee:A(e.refundRelayerFee,Math.min(8,e.fromToken.decimals))},F=g(e.toToken.realOriginContractAddress,e.toToken.realOriginChainId),D=A(e.bridgeFee,18);return{amountIn:m,tokenIn:e.fromToken.contract,tokenOut:F,tokenOutWChainId:e.toToken.realOriginChainId,criteria:E,recipient:R,relayerFees:O,contractAddress:C,bridgeFee:D}}(e,n,I,i,r,u),N=new y.CH(b.MAYAN_FORWARDER_CONTRACT,U),x=new y.CH(B,G);if(P===o.N)m="forwardEth",c=[B,x.interface.encodeFunctionData("wrapAndSwapETH",[C,R,_,E,F])],f=(0,l.m9)(v);else{let e=x.interface.encodeFunctionData("swap",[C,R,_,E,F,P,v]);m="forwardERC20",c=[P,v,d||O,B,e],f=(0,l.m9)(W)}let K=N.interface.encodeFunctionData(m,c);return{to:b.MAYAN_FORWARDER_CONTRACT,data:K,value:f,chainId:r,_forwarder:{method:m,params:c}}}}}]);